"use strict";(self.webpackChunktymout_frontend=self.webpackChunktymout_frontend||[]).push([[427],{1344:(e,s,t)=>{t.d(s,{Ht:()=>r.Ht,qQ:()=>n});var a=t(5725),r=t(8894);const n=new a.E({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:6e4,cacheTime:3e5,retry:1}}})},1481:(e,s,t)=>{t.d(s,{A:()=>i});t(9643);var a=t(7192),r=t(2218),n=t(5432),o=t(8433),l=t(6507);const i=()=>{const e=(0,a.Zp)(),{user:s}=(0,n.n)(),{data:t,isLoading:i,error:c}=(0,o.DW)(null===s||void 0===s?void 0:s._id),d=()=>{e("/shop/catalogue")};return i?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("button",{onClick:d,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,l.jsx)(r.QVr,{className:"text-gray-600"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Templates"})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-8"})]})})]})}):c?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("button",{onClick:d,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,l.jsx)(r.QVr,{className:"text-gray-600"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Templates"})]}),(0,l.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("p",{className:"text-red-700",children:["Error loading shop data: ",c.message||"Unable to load shop data"]})})})]})}):t?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("button",{onClick:d,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,l.jsx)(r.QVr,{className:"text-gray-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Templates"}),(0,l.jsx)("p",{className:"text-gray-600",children:t.name})]})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Templates"}),(0,l.jsxs)("button",{className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:[(0,l.jsx)(r.OiG,{className:"mr-2"}),"Create Template"]})]}),(0,l.jsxs)("div",{className:"bg-gray-50 border border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:"No templates created yet."}),(0,l.jsx)("p",{className:"text-gray-500",children:"Templates help you quickly create standardized products or services."})]})]})})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("button",{onClick:d,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,l.jsx)(r.QVr,{className:"text-gray-600"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Templates"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden p-6 text-center",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No Shop Found"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to set up your shop before you can manage your templates."}),(0,l.jsx)("button",{onClick:()=>e("/shop/edit"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Set Up Your Shop"})]})]})})}},1899:(e,s,t)=>{t.d(s,{Z:()=>o,y:()=>l});var a=t(5038),r=t(6887),n=t(3520);const o=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(o,l,i)=>(0,r.lt)((0,r.Zr)((0,n.D)(s),(0,a.A)({name:"".concat(e,"-storage"),getStorage:()=>localStorage,partialize:e=>{const s={};return Object.keys(e).forEach((t=>{"function"!==typeof e[t]&&(s[t]=e[t])})),s}},t)),{name:e})(o,l,i)},l=(e,s)=>(t,a,o)=>(0,r.lt)((0,n.D)(s),{name:e})(t,a,o)},3649:(e,s,t)=>{t.d(s,{A:()=>k});var a=t(5038),r=t(9643),n=t(7192),o=t(2218),l=t(5432),i=t(8433),c=t(9644),d=t(5469),m=t(7109),x=t(8894),h=t(7027),u=t(2768);const g=["id"],p="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_API_KEY:"AIzaSyCVdOFTlnxaMs7X6kSfSF1qZ3SYc3bklwA",REACT_APP_API_GATEWAY_URL:"http://localhost:3000",REACT_APP_USER_SERVICE_URL:"http://localhost:3001",REACT_APP_EVENT_SERVICE_URL:"http://localhost:3002",REACT_APP_DISCOVERY_SERVICE_URL:"http://localhost:3003",REACT_APP_MESSAGE_SERVICE_URL:"http://localhost:3020",REACT_APP_CHAT_SERVICE_URL:"http://localhost:3020"}.REACT_APP_API_URL||"http://localhost:3008","/api/shop/categories"),b=async e=>{try{return(await u.A.get("".concat(p,"/shop/").concat(e))).data}catch(s){if(s.response&&404===s.response.status)return[];throw s}},y=async e=>(await u.A.post("".concat(p),e)).data,v=async e=>{let{id:s}=e,t=(0,c.A)(e,g);return(await u.A.put("".concat(p,"/").concat(s),t)).data},f=async e=>(await u.A.delete("".concat(p,"/").concat(e))).data;(0,d.v)(((e,s)=>({categories:[],currentCategory:null,isLoading:!1,error:null,setCategories:s=>e({categories:s}),setCurrentCategory:s=>e({currentCategory:s}),clearCurrentCategory:()=>e({currentCategory:null}),fetchCategoriesByShopId:async s=>{e({isLoading:!0,error:null});try{const t=await b(s);return e({categories:t,isLoading:!1}),t}catch(t){throw e({error:t.message,isLoading:!1}),t}}})));var j=t(6507);const N=e=>{let{category:s,onEdit:t,onDelete:a}=e;return(0,j.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:(0,j.jsxs)("div",{className:"flex",children:[s.image?(0,j.jsx)("div",{className:"w-24 h-24 flex-shrink-0",children:(0,j.jsx)("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}):(0,j.jsx)("div",{className:"w-24 h-24 bg-gray-100 flex items-center justify-center flex-shrink-0",children:(0,j.jsx)("span",{className:"text-gray-400 text-xs text-center px-2",children:"No Image"})}),(0,j.jsxs)("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"font-medium text-gray-900",children:s.name}),s.description&&(0,j.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:s.description})]}),(0,j.jsx)("div",{className:"mt-2",children:(0,j.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:["Order: ",s.displayOrder||0]})})]}),(0,j.jsxs)("div",{className:"p-4 flex flex-col justify-center space-y-2",children:[(0,j.jsx)("button",{onClick:()=>t(s),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-full transition-colors","aria-label":"Edit ".concat(s.name),children:(0,j.jsx)(o.uO9,{})}),(0,j.jsx)("button",{onClick:()=>a(s),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors","aria-label":"Delete ".concat(s.name),children:(0,j.jsx)(o.qbC,{})})]})]})})},w=e=>{let{category:s=null,onSubmit:t,onCancel:n,isSubmitting:l=!1}=e;const[i,c]=(0,r.useState)({name:"",description:"",image:"",displayOrder:0}),[d,m]=(0,r.useState)("");(0,r.useEffect)((()=>{s&&(c({name:s.name||"",description:s.description||"",image:s.image||"",displayOrder:s.displayOrder||0}),s.image&&m(s.image))}),[s]);const x=e=>{const{name:s,value:t}=e.target;c((e=>(0,a.A)((0,a.A)({},e),{},{[s]:t})))};return(0,j.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(i)},className:"space-y-6",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name*"}),(0,j.jsx)("input",{type:"text",id:"name",name:"name",value:i.name,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., Electronics, Clothing, Services"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,j.jsx)("textarea",{id:"description",name:"description",value:i.description,onChange:x,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Describe this category..."})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Image"}),(0,j.jsx)("div",{className:"mt-1 flex items-center",children:d?(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsx)("img",{src:d,alt:"Category preview",className:"h-32 w-32 object-cover rounded-md"}),(0,j.jsx)("button",{type:"button",onClick:()=>{m(""),c((e=>(0,a.A)((0,a.A)({},e),{},{image:""})))},className:"absolute top-0 right-0 bg-red-500 text-white p-1 rounded-full","aria-label":"Remove image",children:(0,j.jsx)(o.QCr,{size:12})})]}):(0,j.jsx)("div",{className:"flex items-center justify-center h-32 w-32 border-2 border-dashed border-gray-300 rounded-md",children:(0,j.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,j.jsxs)("div",{className:"flex flex-col items-center",children:[(0,j.jsx)(o.dkL,{className:"h-8 w-8 text-gray-400"}),(0,j.jsx)("span",{className:"mt-1 text-xs text-gray-500",children:"Upload image"})]}),(0,j.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{m(e.target.result),c((s=>(0,a.A)((0,a.A)({},s),{},{image:e.target.result})))},e.readAsDataURL(s)}},className:"sr-only"})]})})}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: Square image, at least 300x300px"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"displayOrder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),(0,j.jsx)("input",{type:"number",id:"displayOrder",name:"displayOrder",value:i.displayOrder,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",min:"0"}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first"})]}),(0,j.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,j.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:l,children:"Cancel"}),(0,j.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:l,children:l?"Saving...":s?"Update Category":"Create Category"})]})]})},C=e=>{let{isOpen:s,onClose:t,category:r=null,onSubmit:n,isSubmitting:l=!1}=e;if(!s)return null;return(0,j.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,j.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t,"aria-hidden":"true"}),(0,j.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,j.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-auto z-10 relative",onClick:e=>e.stopPropagation(),children:[(0,j.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:r?"Edit Category":"Add New Category"}),(0,j.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500","aria-label":"Close",children:(0,j.jsx)(o.QCr,{})})]}),(0,j.jsx)("div",{className:"px-6 py-4",children:(0,j.jsx)(w,{category:r,onSubmit:e=>{n(r?(0,a.A)((0,a.A)({},e),{},{id:r._id}):e)},onCancel:t,isSubmitting:l})})]})})]})},A=e=>{let{isOpen:s,onClose:t,onConfirm:a,title:r="Confirm Action",message:n="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:i="Cancel",isProcessing:c=!1,type:d="danger"}=e;if(!s)return null;const m={danger:{icon:"text-red-600",button:"bg-red-600 hover:bg-red-700",border:"border-red-300"},warning:{icon:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700",border:"border-yellow-300"},info:{icon:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700",border:"border-blue-300"}}[d];return(0,j.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,j.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t,"aria-hidden":"true"}),(0,j.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,j.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-auto z-10 relative",onClick:e=>e.stopPropagation(),children:[(0,j.jsxs)("div",{className:"px-6 pt-6 pb-4 flex items-center",children:[(0,j.jsx)("div",{className:"mr-4 flex-shrink-0 ".concat(m.icon),children:(0,j.jsx)(o.BS8,{size:24})}),(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:r})]}),(0,j.jsx)("div",{className:"px-6 py-2",children:(0,j.jsx)("p",{className:"text-sm text-gray-600",children:n})}),(0,j.jsxs)("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end space-x-3",children:[(0,j.jsx)("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:c,children:i}),(0,j.jsx)("button",{onClick:a,className:"px-4 py-2 rounded-md text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat(m.button),disabled:c,children:c?"Processing...":l})]})]})})]})},k=()=>{const e=(0,n.Zp)(),{user:s}=(0,l.n)(),[t,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[g,p]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),{data:S,isLoading:_,error:E}=(0,i.DW)(null===s||void 0===s?void 0:s._id),{data:I,isLoading:P,error:T}=(R=null===S||void 0===S?void 0:S._id,(0,m.I)({queryKey:["categories","shop",R],queryFn:()=>b(R),enabled:!!R,staleTime:3e5}));var R;const F=(()=>{const e=(0,x.jE)();return(0,h.n)({mutationFn:e=>y(e),onSuccess:(s,t)=>{e.invalidateQueries({queryKey:["categories","shop",t.shopId]}),e.setQueryData(["category",s._id],s)}})})(),L=(()=>{const e=(0,x.jE)();return(0,h.n)({mutationFn:e=>v(e),onSuccess:s=>{e.invalidateQueries({queryKey:["categories","shop",s.shopId]}),e.invalidateQueries({queryKey:["category",s._id]}),e.setQueryData(["category",s._id],s)}})})(),D=(()=>{const e=(0,x.jE)();return(0,h.n)({mutationFn:e=>f(e),onSuccess:(s,t)=>{e.invalidateQueries({queryKey:["categories"]}),e.removeQueries({queryKey:["category",t]})}})})(),O=()=>{e("/shop/catalogue")},U=function(){p(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),c(!0)},V=()=>{c(!1),p(null)};if(_||P)return(0,j.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,j.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,j.jsxs)("div",{className:"flex items-center mb-6",children:[(0,j.jsx)("button",{onClick:O,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,j.jsx)(o.QVr,{className:"text-gray-600"})}),(0,j.jsx)("h1",{className:"text-2xl font-bold",children:"Categories"})]}),(0,j.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,j.jsxs)("div",{className:"animate-pulse",children:[(0,j.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,j.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,j.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,j.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-8"})]})})]})});if(E||T){const e=E||T;return(0,j.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,j.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,j.jsxs)("div",{className:"flex items-center mb-6",children:[(0,j.jsx)("button",{onClick:O,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,j.jsx)(o.QVr,{className:"text-gray-600"})}),(0,j.jsx)("h1",{className:"text-2xl font-bold",children:"Categories"})]}),(0,j.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:(0,j.jsx)("div",{className:"flex",children:(0,j.jsxs)("p",{className:"text-red-700",children:["Error loading shop data: ",e.message||"Unable to load shop data"]})})})]})})}return S?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,j.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,j.jsxs)("div",{className:"flex items-center mb-6",children:[(0,j.jsx)("button",{onClick:O,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,j.jsx)(o.QVr,{className:"text-gray-600"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{className:"text-2xl font-bold",children:"Categories"}),(0,j.jsx)("p",{className:"text-gray-600",children:S.name})]})]}),(0,j.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,j.jsxs)("div",{className:"p-6",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,j.jsx)("h2",{className:"text-xl font-semibold",children:"Categories"}),(0,j.jsxs)("button",{onClick:()=>U(),className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:[(0,j.jsx)(o.OiG,{className:"mr-2"}),"Add Category"]})]}),I&&I.length>0?(0,j.jsx)("div",{className:"space-y-4",children:I.map((e=>(0,j.jsx)(N,{category:e,onEdit:()=>U(e),onDelete:()=>(e=>{k(e),u(!0)})(e)},e._id)))}):(0,j.jsxs)("div",{className:"bg-gray-50 border border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,j.jsx)("p",{className:"text-gray-500 mb-4",children:"No categories created yet."}),(0,j.jsx)("p",{className:"text-gray-500",children:"Categories help organize your products and services."})]})]})})]})}),(0,j.jsx)(C,{isOpen:t,onClose:V,category:g,onSubmit:async e=>{try{g?await L.mutateAsync((0,a.A)((0,a.A)({},e),{},{id:g._id,shopId:S._id})):await F.mutateAsync((0,a.A)((0,a.A)({},e),{},{shopId:S._id})),V()}catch(s){}},isSubmitting:F.isPending||L.isPending}),(0,j.jsx)(A,{isOpen:d,onClose:()=>u(!1),onConfirm:async()=>{try{await D.mutateAsync(w._id),u(!1),k(null)}catch(e){}},title:"Delete Category",message:'Are you sure you want to delete the category "'.concat(null===w||void 0===w?void 0:w.name,'"? This action cannot be undone.'),confirmText:"Delete",cancelText:"Cancel",isProcessing:D.isPending,type:"danger"})]}):(0,j.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,j.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,j.jsxs)("div",{className:"flex items-center mb-6",children:[(0,j.jsx)("button",{onClick:O,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,j.jsx)(o.QVr,{className:"text-gray-600"})}),(0,j.jsx)("h1",{className:"text-2xl font-bold",children:"Categories"})]}),(0,j.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden p-6 text-center",children:[(0,j.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No Shop Found"}),(0,j.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to set up your shop before you can manage your categories."}),(0,j.jsx)("button",{onClick:()=>e("/shop/edit"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Set Up Your Shop"})]})]})})}},3655:(e,s,t)=>{t.d(s,{hc:()=>r});const a=()=>new Promise(((e,s)=>{if(window.google&&window.google.maps)return void e(window.google);const t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyCVdOFTlnxaMs7X6kSfSF1qZ3SYc3bklwA","&libraries=places"),t.async=!0,t.defer=!0,t.onload=()=>{window.google&&window.google.maps?e(window.google):s(new Error("Google Maps script loaded but google.maps is not available"))},t.onerror=()=>{s(new Error("Failed to load Google Maps script"))},document.head.appendChild(t)})),r=async(e,s)=>{try{return e&&s?(await a(),new Promise((t=>{const a=new window.google.maps.places.PlacesService(document.createElement("div")),r={query:"".concat(e," in ").concat(s,", India"),fields:["place_id","name","formatted_address","geometry","types"]};a.textSearch(r,((e,s)=>{if(s===window.google.maps.places.PlacesServiceStatus.OK&&e){const s=e.map((e=>{var s,t,a;return{id:e.place_id,name:e.name||"Unknown Place",address:e.formatted_address||"",category:(null===(s=e.types)||void 0===s?void 0:s[0])||"",coordinates:{latitude:null===(t=e.geometry)||void 0===t?void 0:t.location.lat(),longitude:null===(a=e.geometry)||void 0===a?void 0:a.location.lng()}}}));t(s)}else t([])}))}))):[]}catch(t){return[]}}},3868:(e,s,t)=>{t.d(s,{A:()=>l});t(9643);var a=t(7192),r=t(2218),n=t(8433),o=t(6507);const l=()=>{const e=(0,a.Zp)(),{shopId:s}=(0,a.g)(),{data:t,isLoading:l,error:i}=(0,n.ye)(s),c=()=>{e(-1)};return l?(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,o.jsxs)("div",{className:"flex items-center mb-6",children:[(0,o.jsx)("button",{onClick:c,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,o.jsx)(r.QVr,{className:"text-gray-600"})}),(0,o.jsx)("h1",{className:"text-2xl font-bold",children:"Shop Feedback"})]}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,o.jsxs)("div",{className:"animate-pulse",children:[(0,o.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,o.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,o.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,o.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-6"}),(0,o.jsx)("div",{className:"h-24 bg-gray-200 rounded w-full mb-6"}),(0,o.jsx)("div",{className:"h-32 bg-gray-200 rounded w-full mb-4"}),(0,o.jsx)("div",{className:"h-32 bg-gray-200 rounded w-full mb-4"})]})})]})}):i||!t?(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,o.jsxs)("div",{className:"flex items-center mb-6",children:[(0,o.jsx)("button",{onClick:c,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,o.jsx)(r.QVr,{className:"text-gray-600"})}),(0,o.jsx)("h1",{className:"text-2xl font-bold",children:"Shop Feedback"})]}),(0,o.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:[(0,o.jsx)("div",{className:"flex",children:(0,o.jsx)("p",{className:"text-red-700",children:i?"Error loading shop: ".concat(i.message||"Unable to load shop data"):"Shop not found"})}),(0,o.jsx)("button",{onClick:c,className:"mt-3 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Go Back"})]})]})}):(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-4 max-w-4xl",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsx)("button",{onClick:c,className:"p-2","aria-label":"Go back",children:(0,o.jsx)(r.QVr,{className:"text-gray-800 text-xl"})}),(0,o.jsx)("h1",{className:"text-2xl font-bold text-center flex-grow",children:l?"Loading...":(null===t||void 0===t?void 0:t.name)||"Shop Feedback"}),(0,o.jsx)("div",{className:"w-8"})," "]}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsxs)("div",{className:"bg-green-600 text-white rounded-full px-4 py-1 mb-2 flex items-center",children:[(0,o.jsx)("span",{className:"text-lg font-bold mr-1",children:"4.0"}),(0,o.jsx)(r.gt3,{className:"text-sm"})]}),(0,o.jsxs)("div",{className:"flex items-center text-gray-600 text-xs",children:[(0,o.jsx)("span",{children:"Overall rating (6.8K)"}),(0,o.jsx)(r.__w,{className:"ml-1 text-gray-400 text-xs"})]})]})})}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(r.KSO,{className:"absolute left-3 top-3 text-red-400"}),(0,o.jsx)("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg",placeholder:"Search within reviews"})]})}),(0,o.jsxs)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[(0,o.jsxs)("button",{className:"flex items-center gap-1 px-2 py-0.5 border border-red-300 rounded-full text-red-500 text-xs",children:[(0,o.jsx)("span",{className:"bg-red-500 text-white rounded-full w-3.5 h-3.5 flex items-center justify-center text-xs",children:"1"}),(0,o.jsx)("span",{children:"Filters"})]}),(0,o.jsxs)("button",{className:"flex items-center gap-1 px-2 py-0.5 border border-gray-300 rounded-full text-xs",children:[(0,o.jsx)("span",{children:"High Rating"}),(0,o.jsx)("span",{children:"\u25bc"})]}),(0,o.jsx)("button",{className:"px-2 py-0.5 border border-gray-300 rounded-full text-xs",children:"Verified"}),(0,o.jsx)("button",{className:"px-2 py-0.5 border border-gray-300 rounded-full whitespace-nowrap text-xs",children:"With Photos"})]}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center text-gray-500",children:(0,o.jsx)("p",{children:"Reviews will be implemented in the next phase"})})]})})}},4083:()=>{},4333:(e,s,t)=>{t.d(s,{A:()=>i});t(9643);var a=t(7192),r=t(2218),n=t(5432),o=t(8433),l=t(6507);const i=()=>{const e=(0,a.Zp)(),{user:s}=(0,n.n)(),{data:t,isLoading:i,error:c}=(0,o.DW)(null===s||void 0===s?void 0:s._id),d=()=>{e("/shop/catalogue")};return i?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("button",{onClick:d,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,l.jsx)(r.QVr,{className:"text-gray-600"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Inventory Management"})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-8"})]})})]})}):c?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("button",{onClick:d,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,l.jsx)(r.QVr,{className:"text-gray-600"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Inventory Management"})]}),(0,l.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("p",{className:"text-red-700",children:["Error loading shop data: ",c.message||"Unable to load shop data"]})})})]})}):t?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("button",{onClick:d,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,l.jsx)(r.QVr,{className:"text-gray-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Inventory Management"}),(0,l.jsx)("p",{className:"text-gray-600",children:t.name})]})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Inventory Management"}),(0,l.jsxs)("button",{className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:[(0,l.jsx)(r.OiG,{className:"mr-2"}),"Update Stock"]})]}),(0,l.jsxs)("div",{className:"bg-gray-50 border border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:"No inventory items to manage."}),(0,l.jsx)("p",{className:"text-gray-500",children:"Add products first to manage your inventory."})]})]})})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("button",{onClick:d,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,l.jsx)(r.QVr,{className:"text-gray-600"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Inventory Management"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden p-6 text-center",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No Shop Found"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to set up your shop before you can manage your inventory."}),(0,l.jsx)("button",{onClick:()=>e("/shop/edit"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Set Up Your Shop"})]})]})})}},4480:(e,s,t)=>{t.d(s,{A:()=>f});var a=t(9643),r=t(7192),n=t(2218),o=t(8433),l=t(5432),i=t(7725),c=t(6507);const d=e=>{let{shopId:s,onCategorySelect:t}=e;const[r,o]=(0,a.useState)(null),{data:l,isLoading:d}=(0,i.eG)(s),m=(0,a.useMemo)((()=>[{_id:"1",name:"Category A"},{_id:"2",name:"Category B"},{_id:"3",name:"Category C"},{_id:"4",name:"Category D"},{_id:"5",name:"Category E"},{_id:"6",name:"Category F"}]),[]),x=(0,a.useRef)(null),h=(0,a.useMemo)((()=>l&&l.length>0?l:m),[l,m]);(0,a.useEffect)((()=>{const e=x.current;if(!e)return;const s=s=>{e.scrollWidth>e.clientWidth&&(s.preventDefault(),0!==s.deltaY?e.scrollLeft+=s.deltaY:0!==s.deltaX&&(e.scrollLeft+=s.deltaX))};return e.addEventListener("wheel",s,{passive:!1}),()=>e.removeEventListener("wheel",s)}),[]);return d?(0,c.jsx)("div",{className:"flex overflow-x-auto py-2 no-scrollbar",children:[1,2,3,4].map((e=>(0,c.jsxs)("div",{className:"flex flex-col items-center min-w-[80px] mx-3 flex-shrink-0",children:[(0,c.jsx)("div",{className:"w-[60px] h-[60px] rounded-full bg-gray-200 mb-2"}),(0,c.jsx)("div",{className:"w-[50px] h-[8px] bg-gray-200 rounded"})]},e)))}):h.length?(0,c.jsxs)("div",{ref:x,className:"flex overflow-x-auto py-3 no-scrollbar space-x-4",children:[(0,c.jsxs)("div",{className:"flex flex-col items-center min-w-[80px] cursor-pointer flex-shrink-0 ".concat(r?"opacity-70 hover:opacity-100":"opacity-100"),onClick:()=>{o(null),t&&t(null)},children:[(0,c.jsx)("div",{className:"w-[60px] h-[60px] rounded-full flex items-center justify-center mb-2 ".concat(r?"bg-gray-100 text-gray-700":"bg-indigo-600 text-white"),children:(0,c.jsx)("span",{className:"text-lg",children:"All"})}),(0,c.jsx)("span",{className:"text-xs text-center truncate w-full",children:"All Items"})]}),h.map((e=>{const s=r===e._id;return(0,c.jsxs)("div",{onClick:()=>(e=>{o(e._id),t&&t(e)})(e),className:"flex flex-col items-center min-w-[80px] mx-3 flex-shrink-0 cursor-pointer transition-transform duration-200 hover:-translate-y-1",children:[(0,c.jsx)("div",{className:"w-[60px] h-[60px] rounded-full bg-gray-100 flex items-center justify-center mb-2 shadow-sm transition-all duration-200 ".concat(s?"ring-2 ring-indigo-600 scale-105":""),children:(0,c.jsx)(n.wJQ,{className:"".concat(s?"text-indigo-600":"text-gray-500"),size:20})}),(0,c.jsx)("span",{className:"text-xs ".concat(s?"text-indigo-600 font-semibold":"text-gray-600"," text-center truncate max-w-[80px]"),children:e.name})]},e._id)}))]}):null},m=e=>{let{shopId:s,rating:t=4,reviewCount:a=0}=e;const o=(0,r.Zp)(),l=parseFloat(t).toFixed(1);return(0,c.jsxs)("button",{onClick:()=>{s&&o("/shop/".concat(s,"/feedback"))},className:"flex items-center bg-green-100 text-green-800 rounded-full px-3 py-1 hover:bg-green-200 transition-colors","aria-label":"View shop feedback",children:[(0,c.jsx)(n.gt3,{className:"text-green-600 mr-1"}),(0,c.jsx)("span",{className:"font-bold",children:l}),(0,c.jsxs)("span",{className:"text-xs ml-2 text-gray-600",children:["By ",(i=a,i>=1e3?"".concat((i/1e3).toFixed(1),"K+"):"".concat(i,"+"))]})]});var i};var x=t(7717);const h=e=>{let{shopId:s,selectedCategoryId:t}=e;const[r,o]=(0,a.useState)({}),{data:l,isLoading:d,error:m}=(0,x.Mv)(s,t),{data:h,isLoading:u,error:g}=(0,i.eG)(s);(0,a.useEffect)((()=>{if(l&&l.length>0){const e=l.reduce(((e,s)=>{if(!s.isActive)return e;const t=s.categoryId||s.category||"uncategorized";return e[t]||(e[t]=[]),e[t].push(s),e}),{});o(e)}}),[l,t]);const p=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),b=e=>{if("uncategorized"===e)return"Uncategorized";const s=null===h||void 0===h?void 0:h.find((s=>s._id===e));return s?s.name:""};if(d||u)return(0,c.jsx)("div",{className:"py-6",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,c.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[1,2,3,4].map((e=>(0,c.jsx)("div",{className:"bg-gray-100 rounded-lg h-48"},e)))})]})});if(m||g)return(0,c.jsx)("div",{className:"py-6",children:(0,c.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:(0,c.jsx)("p",{className:"text-red-700",children:"Error loading products. Please try again later."})})});if(!l||0===l.length)return(0,c.jsx)("div",{className:"py-6",children:(0,c.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No products available at this time."})});let y=Object.keys(r);return t&&(y=y.filter((e=>e===t||e===String(t)||e&&e._id&&(e._id===t||e._id===String(t)))),0===y.length&&(y=Object.keys(r))),(0,c.jsx)("div",{className:"py-6",children:(0,c.jsx)("div",{className:"space-y-8",children:y.map((e=>(0,c.jsxs)("div",{children:[b(e)&&(0,c.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:b(e)}),(0,c.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r[e].map((e=>(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 hover:shadow-md transition-shadow",children:[(0,c.jsx)("div",{className:"h-40 overflow-hidden bg-gray-100",children:e.images&&e.images.length>0?(0,c.jsx)("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/300?text=Product"}}):(0,c.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 text-gray-400",children:"No Image"})}),(0,c.jsxs)("div",{className:"p-3",children:[(0,c.jsx)("h4",{className:"font-medium text-gray-800 line-clamp-1",children:e.name}),e.description&&(0,c.jsx)("p",{className:"text-gray-600 text-sm mt-1 line-clamp-2",children:e.description}),(0,c.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,c.jsx)("div",{children:e.discountPrice?(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsx)("span",{className:"font-semibold text-indigo-600",children:p(e.discountPrice)}),(0,c.jsx)("span",{className:"text-xs text-gray-500 line-through",children:p(e.price)})]}):(0,c.jsx)("span",{className:"font-semibold text-indigo-600",children:p(e.price)})}),(0,c.jsx)("button",{className:"p-2 rounded-full text-indigo-600 hover:bg-indigo-50 transition-colors","aria-label":"Add to cart",children:(0,c.jsx)(n.AsH,{})})]})]})]},e._id)))})]},e)))})})};var u=t(5931);const g=()=>{const e=(0,r.Zp)(),{shopId:s}=(0,r.g)(),{user:t}=(0,l.n)(),i=(0,a.useRef)(null),x=s||(null===t||void 0===t?void 0:t._id),{data:g,isLoading:p,error:b,refetch:y}=(0,o.DW)(x),v=t&&g&&t._id===g.ownerId,f=()=>{e(-1)},[j,N]=(0,a.useState)(null);return p?(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)("button",{onClick:f,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,c.jsx)(n.QVr,{className:"text-gray-600"})}),(0,c.jsx)("h1",{className:"text-2xl font-bold",children:"Shop"})]}),(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-8",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[(0,c.jsx)("div",{className:"h-48 bg-gray-200 w-full"}),(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"})]})]})})]})}):b?(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)("button",{onClick:f,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,c.jsx)(n.QVr,{className:"text-gray-600"})}),(0,c.jsx)("h1",{className:"text-2xl font-bold",children:"Shop"})]}),(0,c.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:[(0,c.jsx)("div",{className:"flex",children:(0,c.jsxs)("p",{className:"text-red-700",children:["Error loading shop: ",b.message||"Unable to load shop data"]})}),(0,c.jsx)("button",{onClick:()=>y(),className:"mt-3 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Try Again"})]})]})}):g?(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,c.jsxs)("button",{onClick:f,className:"flex items-center text-indigo-600 hover:text-indigo-800 mb-6 group",children:[(0,c.jsx)(n.QVr,{className:"mr-2 group-hover:-translate-x-1 transition-transform duration-200"}),(0,c.jsx)("span",{children:"Back"})]}),(0,c.jsx)("div",{className:"bg-white mb-8",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[g.logo&&(0,c.jsx)("div",{className:"mr-4 flex-shrink-0",children:(0,c.jsx)("img",{src:g.logo,alt:"".concat(g.name," logo"),className:"w-16 h-16 object-cover rounded-full border-2 border-white shadow",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/150?text=Logo"}})}),(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:g.name}),(0,c.jsx)(m,{shopId:g._id,rating:g.rating||4,reviewCount:g.reviewCount||6800})]}),(0,c.jsx)("div",{className:"mt-2 mb-1",children:(0,c.jsxs)(u.N_,{to:"/shop/".concat(g._id,"/business-info"),className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-md hover:bg-gray-100 transition-colors text-sm",children:[(0,c.jsx)(n.__w,{className:"text-indigo-600",size:16}),(0,c.jsx)("span",{children:"Business Information"})]})})]})]}),v&&(0,c.jsxs)("button",{onClick:()=>{e("/shop/edit")},className:"mt-4 md:mt-0 flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:[(0,c.jsx)(n.uO9,{className:"mr-2"}),"Edit Shop"]})]}),g.category&&(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)("span",{className:"inline-block bg-indigo-100 text-indigo-800 text-sm px-3 py-1 rounded-full",children:g.category})}),(0,c.jsx)("p",{className:"text-gray-600 mb-6",style:{whiteSpace:"pre-wrap"},children:g.description}),(0,c.jsx)("div",{className:"mt-6",children:(0,c.jsx)(d,{shopId:g._id,onCategorySelect:e=>{N(e),i.current&&window.scrollTo({top:i.current.offsetTop-20,behavior:"smooth"})}})}),(0,c.jsx)("div",{ref:i,className:"mt-8",children:(0,c.jsx)(h,{shopId:g._id,selectedCategoryId:j?j._id:null})})]})})]})}):(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)("button",{onClick:f,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,c.jsx)(n.QVr,{className:"text-gray-600"})}),(0,c.jsx)("h1",{className:"text-2xl font-bold",children:"Shop"})]}),(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden p-6 text-center",children:[(0,c.jsx)(n.Tvt,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,c.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Shop Not Found"}),(0,c.jsx)("p",{className:"text-gray-600 mb-6",children:"The shop you're looking for doesn't exist or has been removed."}),(0,c.jsx)("button",{onClick:()=>e("/explore"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Explore Shops"})]})]})})};var p=t(8763);const b=e=>{let{shopData:s}=e;return s?(0,c.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",id:"business-info",children:[(0,c.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Contact Information"}),(0,c.jsxs)("div",{className:"space-y-2",children:[s.address&&(0,c.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,c.jsx)(n.vq8,{className:"mr-2 text-indigo-600"}),(0,c.jsx)("span",{children:s.address})]}),s.contactPhone&&(0,c.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,c.jsx)(n.Cab,{className:"mr-2 text-indigo-600"}),(0,c.jsx)("span",{children:s.contactPhone})]}),s.contactEmail&&(0,c.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,c.jsx)(n.maD,{className:"mr-2 text-indigo-600"}),(0,c.jsx)("span",{children:s.contactEmail})]})]})]}):null},y=()=>{const e=(0,r.Zp)(),{shopId:s}=(0,r.g)(),{data:t,isLoading:a,isError:l,error:i}=(0,o.ye)(s),d=()=>{e(-1)};return a?(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,c.jsx)("div",{className:"p-4 bg-white shadow-sm",children:(0,c.jsx)("button",{onClick:d,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Back",children:(0,c.jsx)(n.QVr,{})})}),(0,c.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-64 mb-2.5"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-56 mb-2.5"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-72"})]})})]}):l?(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,c.jsx)("div",{className:"p-4 bg-white shadow-sm",children:(0,c.jsx)("button",{onClick:d,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Back",children:(0,c.jsx)(n.QVr,{})})}),(0,c.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,c.jsxs)("div",{className:"text-center p-6",children:[(0,c.jsx)("h2",{className:"text-lg font-medium text-red-600 mb-2",children:"Error Loading Business Information"}),(0,c.jsx)("p",{className:"text-gray-600",children:(null===i||void 0===i?void 0:i.message)||"Could not load business details"}),(0,c.jsx)("button",{onClick:d,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Go Back"})]})})]}):t?(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,c.jsxs)("div",{className:"p-4 bg-white shadow-sm flex items-center justify-between",children:[(0,c.jsx)("button",{onClick:d,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Back",children:(0,c.jsx)(n.QVr,{})}),(0,c.jsx)("h1",{className:"text-xl font-semibold",children:"Business Information"}),(0,c.jsx)("div",{className:"w-10"})," "]}),(0,c.jsx)("div",{className:"flex-1 p-4",children:(0,c.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-6",children:(0,c.jsx)(b,{shopData:t})}),(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-6",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("h2",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[(0,c.jsxs)("svg",{className:"w-5 h-5 mr-2 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Location"]}),(0,c.jsx)("div",{className:"bg-gray-100 rounded-lg w-full h-48 mb-3 flex items-center justify-center",children:t.location?(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-gray-500",children:"Interactive map would be displayed here"}),(0,c.jsx)("p",{className:"text-gray-700 mt-2 font-medium",children:t.location})]}):(0,c.jsx)("p",{className:"text-gray-500",children:"No location information available"})}),t.address&&(0,c.jsxs)("div",{className:"flex items-start mt-4",children:[(0,c.jsx)("svg",{className:"w-5 h-5 text-gray-500 mt-0.5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,c.jsx)("span",{className:"text-gray-700",children:t.address})]})]})}),(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-6",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("h2",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[(0,c.jsx)("svg",{className:"w-5 h-5 mr-2 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Business Hours"]}),t.businessHours?(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-gray-600",children:"Monday - Friday"}),(0,c.jsx)("span",{className:"text-gray-800 font-medium",children:"9:00 AM - 6:00 PM"})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-gray-600",children:"Saturday"}),(0,c.jsx)("span",{className:"text-gray-800 font-medium",children:"10:00 AM - 4:00 PM"})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-gray-600",children:"Sunday"}),(0,c.jsx)("span",{className:"text-gray-800 font-medium",children:"Closed"})]})]}):(0,c.jsx)("p",{className:"text-gray-500",children:"Business hours not specified"})]})}),(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("h2",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[(0,c.jsx)("svg",{className:"w-5 h-5 mr-2 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Connect"]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[t.website&&(0,c.jsxs)("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,c.jsx)("svg",{className:"w-5 h-5 text-indigo-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),(0,c.jsx)("span",{children:"Website"})]}),(0,c.jsxs)("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,c.jsx)("svg",{className:"w-5 h-5 text-indigo-600 mr-3",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.166 6.84 9.49.5.09.68-.22.68-.48v-1.69c-2.782.6-3.37-1.34-3.37-1.34-.454-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.61.07-.61 1 .07 1.53 1.03 1.53 1.03.9 1.52 2.34 1.08 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.94 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.28.1-2.66 0 0 .84-.27 2.75 1.02.8-.22 1.65-.33 2.5-.33.85 0 1.7.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.38.2 2.41.1 2.66.64.7 1.03 1.59 1.03 2.68 0 3.84-2.34 4.68-4.57 4.93.36.31.68.92.68 1.85v2.74c0 .27.18.58.69.48A10.02 10.02 0 0022 12C22 6.477 17.523 2 12 2z"})}),(0,c.jsx)("span",{children:"GitHub"})]}),(0,c.jsxs)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,c.jsx)("svg",{className:"w-5 h-5 text-indigo-600 mr-3",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M22.675 0H1.325C.593 0 0 .593 0 1.325v21.351C0 23.407.593 24 1.325 24H12.82v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116c.73 0 1.323-.593 1.323-1.325V1.325C24 .593 23.407 0 22.675 0z"})}),(0,c.jsx)("span",{children:"Facebook"})]}),(0,c.jsxs)("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,c.jsx)("svg",{className:"w-5 h-5 text-indigo-600 mr-3",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"})}),(0,c.jsx)("span",{children:"Instagram"})]})]})]})})]})})]}):(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,c.jsx)("div",{className:"p-4 bg-white shadow-sm",children:(0,c.jsx)("button",{onClick:d,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Back",children:(0,c.jsx)(n.QVr,{})})}),(0,c.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,c.jsxs)("div",{className:"text-center p-6",children:[(0,c.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-2",children:"No Business Found"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Could not find business information."}),(0,c.jsx)("button",{onClick:d,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Go Back"})]})})]})};var v=t(8659);const f=()=>(0,c.jsxs)(r.BV,{children:[(0,c.jsx)(r.qh,{path:"/",element:(0,c.jsx)(g,{})}),(0,c.jsx)(r.qh,{path:"/edit",element:(0,c.jsx)(p.A,{})}),(0,c.jsx)(r.qh,{path:"/:shopId",element:(0,c.jsx)(g,{})}),(0,c.jsx)(r.qh,{path:"/:shopId/business-info",element:(0,c.jsx)(y,{})}),(0,c.jsx)(r.qh,{path:"/products",element:(0,c.jsx)(v.A,{})})]})},4702:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var a=t(5038),r=t(2768),n=t(5432);const o={getEventById:async e=>{try{var s,t,n,o,l,i;const x=localStorage.getItem("token");let h=localStorage.getItem("userId");if(x&&!h)try{const e=x.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=JSON.parse(window.atob(e));h=s.id}catch(m){}const u=(await r.A.get("".concat("http://localhost:3002","/events/").concat(e))).data.data;if(!u)throw new Error("Event not found: ".concat(e));const g=(null!==(s=u.date)&&void 0!==s&&s.start?new Date(u.date.start):new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),p=(null===(t=u.location)||void 0===t?void 0:t.city)||"Unknown Location";let b=!1,y=!1;var c,d;if(h)localStorage.setItem("userId",h),b=null===(c=u.attendees)||void 0===c?void 0:c.some((e=>{var s,t,a;return((null===(s=e.userId)||void 0===s||null===(t=s._id)||void 0===t?void 0:t.toString())||(null===(a=e.userId)||void 0===a?void 0:a.toString()))===h})),y=null===(d=u.requests)||void 0===d?void 0:d.some((e=>{var s,t,a;const r=(null===(s=e.userId)||void 0===s||null===(t=s._id)||void 0===t?void 0:t.toString())||(null===(a=e.userId)||void 0===a?void 0:a.toString()),n="pending"===e.status;return r===h&&n}));return(0,a.A)((0,a.A)({},u),{},{id:u._id,type:u.type||"event",image:u.image||null,location:p,date:g,participants:(null===(n=u.attendees)||void 0===n?void 0:n.length)||0,maxParticipants:u.capacity||u.maxAttendees||10,tags:u.tags||[],isJoined:b,isRequested:y,host:{id:(null===(o=u.host)||void 0===o?void 0:o.userId)||"unknown",name:(null===(l=u.host)||void 0===l?void 0:l.name)||"Anonymous Host",image:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent((null===(i=u.host)||void 0===i?void 0:i.name)||"User"),"&background=random&color=fff&size=128")}})}catch(x){throw x}},joinEvent:async(e,s)=>{try{const t=n.n.getState().user,o=(null===t||void 0===t?void 0:t._id)||localStorage.getItem("userId")||s.userId||"1";localStorage.setItem("userId",o);const l=(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.fullName)||s.name||"Anonymous User",i=(0,a.A)((0,a.A)({},s),{},{userId:o,name:l}),c=localStorage.getItem("token"),d={};c&&(d.Authorization="Bearer ".concat(c));const m=(await r.A.post("".concat("http://localhost:3002","/events/").concat(e,"/join"),i,{headers:d})).data.data;return(0,a.A)((0,a.A)({},m),{},{isRequested:!0})}catch(t){if(t.response&&400===t.response.status&&t.response.data.error.includes("already requested"))return{id:e,isRequested:!0};throw t}},leaveEvent:async(e,s)=>{try{const t=localStorage.getItem("token"),a={};t&&(a.Authorization="Bearer ".concat(t));return(await r.A.post("".concat("http://localhost:3002","/events/").concat(e,"/leave"),{userId:s},{headers:a})).data.data}catch(t){throw t}},submitFeedback:async(e,s)=>{try{const t=localStorage.getItem("token"),a={};t&&(a.Authorization="Bearer ".concat(t));return(await r.A.post("".concat("http://localhost:3002","/events/").concat(e,"/feedback"),s,{headers:a})).data.data}catch(t){throw t}}}},5119:(e,s,t)=>{t.d(s,{A:()=>x});var a=t(9643),r=t(5931),n=t(7192),o=t(5654),l=t(876),i=t(6810),c=t(6507);const d=(0,a.lazy)((()=>Promise.all([t.e(6),t.e(998)]).then(t.bind(t,3998)))),m=(0,a.lazy)((()=>t.e(811).then(t.bind(t,5811)))),x=()=>{const[e,s]=(0,r.ok)(),{user:t}=(0,l.P_)(),x=(0,a.useRef)(null),[h,u]=(0,a.useState)([]),g=e.get("q")||"",p=e.getAll("tag"),b=e.get("view")||"Explore",y=e.get("timeFilter")||"all",v=parseInt(e.get("distance")||"10",10),f=e.get("sort")||"relevance",[j,N]=(0,a.useState)(e.get("city")||"Agra"),w=(0,n.zy)();(0,a.useEffect)((()=>{(async()=>{if(t&&t._id)try{t.interests&&Array.isArray(t.interests)&&t.interests.length>0&&u(t.interests)}catch(e){u(["Food","Tech","Networking"])}})()}),[t]);const{data:C=[],isLoading:A,updateFilters:k}=(0,o.DQ)({query:g,tags:p,distance:v,sortBy:f,city:j,view:b,userInterests:"Only For You"===b?h:[],timeFilter:y});(0,a.useEffect)((()=>{if(w.state&&w.state.selectedCity){const t=w.state.selectedCity;N(t);const a=new URLSearchParams(e);a.set("city",t),s(a),k({city:t}),window.history.replaceState({},document.title)}}),[w.state,e,s,k]);const S=t=>{const a=new URLSearchParams(e);a.set("timeFilter",t),s(a),k({timeFilter:t})},[_,E]=(0,a.useState)(!1),I=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(!_&&I.current){const e=setTimeout((()=>{const e=I.current,s=e.scrollWidth-e.clientWidth;if(s>0){(()=>{const t=Math.min(.4*s,200);e.scrollTo({left:t,behavior:"smooth"}),setTimeout((()=>{e.scrollTo({left:0,behavior:"smooth"}),E(!0)}),1200)})()}else E(!0)}),800);return()=>clearTimeout(e)}}),[_]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("style",{jsx:!0,children:"        \n        /* City selector style */\n        .city-selector-container {\n          background-color: #ffffff;\n          border-radius: 12px;\n          padding: 8px 16px;\n          display: flex;\n          align-items: center;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          border: 1px solid rgba(100, 116, 139, 0.2);\n          box-shadow: 0 2px 10px rgba(100, 116, 139, 0.1);\n        }\n        \n        .city-selector-container:hover {\n          box-shadow: 0 4px 12px rgba(100, 116, 139, 0.15);\n          border: 1px solid rgba(100, 116, 139, 0.3);\n        }\n\n        /* Horizontal scrolling for tag filter */\n        .tag-scroll-container {\n          display: flex;\n          overflow-x: auto;\n          overflow-y: hidden;\n          white-space: nowrap;\n          -webkit-overflow-scrolling: touch;\n          scrollbar-width: none; /* Firefox */\n          padding: 0 !important;\n          margin: 0 !important;\n          max-width: 100%;\n        }\n        \n        .tag-scroll-container::-webkit-scrollbar {\n          display: none; /* Chrome, Safari */\n        }\n        \n        .tag-item {\n          display: inline-block;\n          flex-shrink: 0;\n        }\n\n        /* Ensure the page does not horizontally scroll at all */\n        body, html { \n          overflow-x: hidden !important;\n          width: 100%;\n          max-width: 100vw;\n          position: relative;\n          box-sizing: border-box;\n          margin: 0;\n          padding: 0;\n        }\n        \n        /* Force all content to stay within viewport */\n        .explore-container {\n          width: 100%;\n          max-width: 100vw;\n          overflow-x: hidden !important;\n          position: relative;\n          box-sizing: border-box;\n        }\n        \n        /* Prevent any children from causing overflow */\n        .explore-container > * {\n          max-width: 100vw;\n          overflow-x: hidden !important;\n          box-sizing: border-box;\n        }\n      "}),(0,c.jsxs)("div",{className:"explore-container container w-full pt-0 pb-8 overflow-x-hidden max-w-full",ref:x,style:{margin:0,padding:0,backgroundColor:"#FFFFFF",width:"100%",maxWidth:"100vw",overflowX:"hidden"},children:[(0,c.jsx)("div",{className:"mt-5 px-4 mb-8",style:{position:"relative",zIndex:30},children:(0,c.jsx)("div",{className:"max-w-xl mx-auto flex justify-start",children:(0,c.jsx)("div",{className:"city-selector-container bg-white shadow-sm border border-gray-200 rounded-lg",children:(0,c.jsx)(a.Suspense,{fallback:(0,c.jsx)("div",{className:"h-10 w-32 bg-gray-100 animate-pulse rounded-md"}),children:(0,c.jsx)(m,{currentCity:j,onCityChange:t=>{N(t);const a=new URLSearchParams(e);a.set("city",t),s(a),k({city:t})}})})})})}),(0,c.jsx)("div",{className:"mt-4 px-4 mb-2",style:{position:"relative",zIndex:20},children:(0,c.jsx)("div",{className:"max-w-xl mx-auto",children:(0,c.jsx)(i.A,{query:g,onSearch:t=>{const a=new URLSearchParams(e);t?a.set("q",t):a.delete("q"),s(a),k({query:t})}})})}),(0,c.jsxs)("div",{className:"flex space-x-2 mt-2 px-4",children:[(0,c.jsx)("button",{onClick:()=>S("all"),className:"px-3 py-1.5 text-sm font-medium rounded-full transition ".concat("all"===y?"bg-indigo-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-indigo-50"),children:"All"}),(0,c.jsx)("button",{onClick:()=>S("today"),className:"px-3 py-1.5 text-sm font-medium rounded-full transition ".concat("today"===y?"bg-indigo-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-indigo-50"),children:"Today"}),(0,c.jsx)("button",{onClick:()=>S("thisWeek"),className:"px-3 py-1.5 text-sm font-medium rounded-full transition ".concat("thisWeek"===y?"bg-indigo-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-indigo-50"),children:"This Week"})]}),(0,c.jsx)("div",{className:"mt-4 px-4",children:(0,c.jsx)(a.Suspense,{fallback:(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map(((e,s)=>(0,c.jsx)("div",{className:"h-64 bg-gray-100 animate-pulse rounded-md"},s)))}),children:(0,c.jsx)(d,{results:C,isLoading:A,emptyMessage:"No results found. Try adjusting your search or filters."})})})]})]})}},5340:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(9643),r=t(7192),n=t(5931),o=t(2218),l=t(5432),i=t(8433),c=t(6507);const d=()=>{const e=(0,r.Zp)(),{user:s}=(0,l.n)();(0,a.useEffect)((()=>{null!==s&&void 0!==s&&s._id||e("/login")}),[s,e]);const t=()=>{e("/host/business")},{data:d,isLoading:m,error:x}=(0,i.DW)(null===s||void 0===s?void 0:s._id);return m?(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)("button",{onClick:t,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,c.jsx)(o.QVr,{className:"text-gray-600"})}),(0,c.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Catalogue"})]}),(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-8"}),(0,c.jsx)("div",{className:"h-10 bg-gray-200 rounded w-full mb-4"}),(0,c.jsx)("div",{className:"h-10 bg-gray-200 rounded w-full mb-4"}),(0,c.jsx)("div",{className:"h-10 bg-gray-200 rounded w-full mb-4"})]})})]})}):x?(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)("button",{onClick:t,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,c.jsx)(o.QVr,{className:"text-gray-600"})}),(0,c.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Catalogue"})]}),(0,c.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:[(0,c.jsx)("div",{className:"flex",children:(0,c.jsxs)("p",{className:"text-red-700",children:["Error loading shop data: ",x.message||"Unable to load shop data"]})}),(0,c.jsx)("button",{onClick:()=>e("/shop/edit"),className:"mt-3 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Set Up Your Shop First"})]})]})}):d?(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)("button",{onClick:t,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,c.jsx)(o.QVr,{className:"text-gray-600"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Catalogue"}),(0,c.jsx)("p",{className:"text-gray-600",children:d.name})]})]}),(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Catalogue Management"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsx)(n.N_,{to:"/shop/catalogue/products",className:"no-underline",children:(0,c.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow flex items-center",children:[(0,c.jsx)("div",{className:"bg-indigo-50 p-3 rounded-full mr-4",children:(0,c.jsx)(o.svy,{className:"text-indigo-600 text-xl"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-medium text-gray-900",children:"Products & Services"}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your product and service offerings"})]})]})}),(0,c.jsx)(n.N_,{to:"/shop/catalogue/categories",className:"no-underline",children:(0,c.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow flex items-center",children:[(0,c.jsx)("div",{className:"bg-indigo-50 p-3 rounded-full mr-4",children:(0,c.jsx)(o.BuZ,{className:"text-indigo-600 text-xl"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-medium text-gray-900",children:"Categories"}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Organize your products by category"})]})]})}),(0,c.jsx)(n.N_,{to:"/shop/catalogue/inventory",className:"no-underline",children:(0,c.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow flex items-center",children:[(0,c.jsx)("div",{className:"bg-indigo-50 p-3 rounded-full mr-4",children:(0,c.jsx)(o.rrY,{className:"text-indigo-600 text-xl"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-medium text-gray-900",children:"Inventory"}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your stock and availability"})]})]})}),(0,c.jsx)(n.N_,{to:"/shop/catalogue/template",className:"no-underline",children:(0,c.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow flex items-center",children:[(0,c.jsx)("div",{className:"bg-indigo-50 p-3 rounded-full mr-4",children:(0,c.jsx)(o.Y4c,{className:"text-indigo-600 text-xl"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-medium text-gray-900",children:"Template"}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Create standardized product templates"})]})]})})]})]})})]})}):(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)("button",{onClick:t,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,c.jsx)(o.QVr,{className:"text-gray-600"})}),(0,c.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Catalogue"})]}),(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden p-6 text-center",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No Shop Found"}),(0,c.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to set up your shop before you can manage your catalogue."}),(0,c.jsx)("button",{onClick:()=>e("/shop/edit"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Set Up Your Shop"})]})]})})}},5432:(e,s,t)=>{t.d(s,{N:()=>c,n:()=>i});var a=t(5469),r=t(1899),n=t(7320),o=t(2768);const l=e=>{void 0!==window.__authInterceptorId&&(o.A.interceptors.request.eject(window.__authInterceptorId),window.__authInterceptorId=void 0),void 0!==window.__authResponseInterceptorId&&(o.A.interceptors.response.eject(window.__authResponseInterceptorId),window.__authResponseInterceptorId=void 0);const s=o.A.interceptors.request.use((s=>{if(s.withCredentials=!0,e)s.headers.Authorization="Bearer ".concat(e),localStorage.setItem("auth_token",e);else{const e=localStorage.getItem("auth_token");e&&(s.headers.Authorization="Bearer ".concat(e))}return s}),(e=>Promise.reject(e))),t=o.A.interceptors.response.use((e=>e),(async e=>{var s;const t=e.config;if(401===(null===(s=e.response)||void 0===s?void 0:s.status)&&!t._retry){t._retry=!0;try{const s=i.getState(),a=s.refreshToken;if(!a)return s.logout(),Promise.reject(e);const r=await n.A.refreshToken(a),{user:l,token:c}=r;return s.setUser(l,c,a),t.headers.Authorization="Bearer ".concat(c),(0,o.A)(t)}catch(a){return i.getState().logout(),Promise.reject(e)}}return Promise.reject(e)}));window.__authInterceptorId=s,window.__authResponseInterceptorId=t},i=(0,a.v)((0,r.Z)("auth",((e,s)=>({user:null,token:null,refreshToken:null,isAuthenticated:!1,loading:!1,error:null,setUser:(s,t,a)=>{e({user:s,token:t,refreshToken:a,isAuthenticated:null!==s&&void 0!==s,error:null}),t&&(localStorage.setItem("auth_token",t),l(t))},login:async t=>{e({loading:!0,error:null});try{const{user:s,token:a,refreshToken:r}=await n.A.login(t);return l(a),e({user:s,token:a,refreshToken:r,isAuthenticated:!0,loading:!1,error:null}),{success:!0}}catch(o){var a,r;return e({loading:!1,error:(null===(a=o.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Login failed"}),{success:!1,error:s().error}}},logout:async()=>{e({loading:!0});try{await n.A.logout()}catch(s){}finally{e({user:null,token:null,refreshToken:null,isAuthenticated:!1,loading:!1,error:null}),localStorage.removeItem("auth_token"),l(null)}},register:async t=>{e({loading:!0,error:null});try{const{user:s,token:a,refreshToken:r}=await n.A.register(t);return l(a),e({user:s,token:a,refreshToken:r,isAuthenticated:!0,loading:!1,error:null}),{success:!0}}catch(o){var a,r;return e({loading:!1,error:(null===(a=o.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Registration failed"}),{success:!1,error:s().error}}},handleOAuthVerification:async t=>{e({loading:!0,error:null});try{const{token:s,refreshToken:a}="string"===typeof t?{token:t,refreshToken:null}:t;if(!s)throw new Error("No token provided");const r=await n.A.handleOAuthVerification(s);return l(s),e({user:r,token:s,refreshToken:a,isAuthenticated:!0,loading:!1,error:null}),{success:!0}}catch(o){var a,r;return e({loading:!1,error:(null===(a=o.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"OAuth verification failed"}),{success:!1,error:s().error}}},refreshAccessToken:async()=>{const{refreshToken:t}=s();if(!t)return{success:!1,error:"No refresh token available"};e({loading:!0,error:null});try{const{user:s,token:a}=await n.A.refreshToken(t);return e({user:s,token:a,isAuthenticated:!0,loading:!1,error:null}),l(a),{success:!0}}catch(a){return s().logout(),{success:!1,error:"Failed to refresh token"}}},clearError:()=>e({error:null})})))),c=()=>{const e=localStorage.getItem("auth-storage");if(e)try{const{state:s}=JSON.parse(e);null!==s&&void 0!==s&&s.token&&l(s.token)}catch(s){}}},6485:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(2768);const r={getProfile:async()=>{try{const e=await a.A.get("/api/users/user/me");if(e.data&&e.data.success)return e.data.data;throw new Error("Failed to fetch profile data")}catch(e){throw e}},getProfileById:async e=>{try{const s=await a.A.get("/api/users/user/".concat(e));if(s.data&&s.data.success)return s.data.data;if(s.data&&!s.data.success)return s.data;throw new Error("Failed to fetch profile data for user ".concat(e))}catch(s){throw s}},updateProfile:async e=>{try{const s=await a.A.put("/api/users/user/profile",e);if(s.data&&s.data.success)return s.data.data;throw new Error("Failed to update profile data")}catch(s){throw s}},updatePreferences:async e=>{try{const s=await a.A.put("/api/users/user/preferences",e);if(s.data&&s.data.success)return s.data.data;throw new Error("Failed to update preferences")}catch(s){throw s}}}},6995:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(5038),r=t(2768),n=t(3888),o=t(3169);const l={getExploreItems:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const s=(0,a.A)({},e);"Only For You"===e.view&&e.userInterests&&(Array.isArray(e.userInterests)?s.userInterests=e.userInterests:"string"===typeof e.userInterests&&(s.userInterests=e.userInterests.split(","))),e.tags&&Array.isArray(e.tags)&&e.tags.length;const t=await r.A.get("".concat("http://localhost:3002","/events/search"),{params:s});let n=(t.data.data||[]).filter((e=>{const s="public"===e.access,t=!(!e.date||!e.date.start)&&(0,o.A)(new Date(e.date.start));return s&&!t}));return e.timeFilter&&"all"!==e.timeFilter&&(n=n.filter((s=>{if(!s.date||!s.date.start)return!1;const t=new Date(s.date.start),a=new Date;if("today"===e.timeFilter)return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear();if("thisWeek"===e.timeFilter){const e=a.getDay(),s=new Date(a);s.setDate(a.getDate()-e),s.setHours(0,0,0,0);const r=new Date(a);return r.setDate(a.getDate()+(6-e)),r.setHours(23,59,59,999),t>=s&&t<=r}return!0}))),n.map((e=>{var s,t,r,n,o,l;const i=(null!==(s=e.date)&&void 0!==s&&s.start?new Date(e.date.start):new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),c=(null===(t=e.location)||void 0===t?void 0:t.city)||"Unknown Location";return(0,a.A)((0,a.A)({},e),{},{id:e._id,type:e.type||"event",image:e.image||null,location:c,date:i,participants:(null===(r=e.attendees)||void 0===r?void 0:r.length)||0,maxParticipants:e.capacity||e.maxAttendees||10,tags:e.tags||[],host:{id:(null===(n=e.host)||void 0===n?void 0:n.userId)||"unknown",name:(null===(o=e.host)||void 0===o?void 0:o.name)||"Anonymous Host",image:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent((null===(l=e.host)||void 0===l?void 0:l.name)||"User"),"&background=random&color=fff&size=128")}})}))}catch(s){throw s}},getItemDetails:async(e,s)=>{try{let t;switch(await new Promise((e=>setTimeout(e,300))),s){case"table":t=n.gf.find((s=>s.id===e));break;case"circle":t=n.Kr.find((s=>s.id===e));break;default:t=n.uG.find((s=>s.id===e))}if(!t)throw new Error("Item not found: ".concat(s," ").concat(e));return(0,a.A)((0,a.A)({},t),{},{type:s})}catch(t){throw t}}}},7320:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(2768);a.A.defaults.withCredentials=!0;const r={getCurrentUser:async()=>{try{return(await a.A.get("/api/users/auth/current")).data}catch(e){throw e}},login:async e=>{try{return(await a.A.post("/api/users/auth/login",e)).data}catch(s){throw s}},register:async e=>{try{return(await a.A.post("/api/users/auth/register",e)).data}catch(s){throw s}},logout:async()=>{try{await a.A.post("/api/users/auth/logout")}catch(e){throw e}},handleOAuthVerification:async e=>{if(!e)throw new Error("No token received");try{return(await a.A.get("/api/users/auth/oauth/verify",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(s){throw s}},refreshToken:async e=>{try{return(await a.A.post("/api/users/auth/refresh-token",{refreshToken:e})).data.data}catch(s){throw s}}}},7717:(e,s,t)=>{t.d(s,{Pg:()=>d,W$:()=>x,Mv:()=>c,CC:()=>m});var a=t(7109),r=t(8894),n=t(7027),o=t(2768);const l="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_API_KEY:"AIzaSyCVdOFTlnxaMs7X6kSfSF1qZ3SYc3bklwA",REACT_APP_API_GATEWAY_URL:"http://localhost:3000",REACT_APP_USER_SERVICE_URL:"http://localhost:3001",REACT_APP_EVENT_SERVICE_URL:"http://localhost:3002",REACT_APP_DISCOVERY_SERVICE_URL:"http://localhost:3003",REACT_APP_MESSAGE_SERVICE_URL:"http://localhost:3020",REACT_APP_CHAT_SERVICE_URL:"http://localhost:3020"}.REACT_APP_API_URL||"http://localhost:3008","/api/shop/products"),i={fetchProductsByShopId:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const t="".concat(l,"/shop/").concat(e),a=s?{categoryId:s}:{};return(await o.A.get(t,{params:a})).data}catch(t){throw t}},fetchProductsByCategoryId:async e=>{try{return(await o.A.get("".concat(l,"/category/").concat(e))).data}catch(s){throw s}},fetchProductById:async e=>{try{return(await o.A.get("".concat(l,"/").concat(e))).data}catch(s){throw s}},createProduct:async e=>{try{return(await o.A.post(l,e)).data}catch(s){throw s}},updateProduct:async(e,s)=>{try{return(await o.A.put("".concat(l,"/").concat(e),s)).data}catch(t){throw t}},updateProductStock:async(e,s)=>{try{return(await o.A.patch("".concat(l,"/").concat(e,"/stock"),s)).data}catch(t){throw t}},deleteProduct:async e=>{try{return(await o.A.delete("".concat(l,"/").concat(e))).data}catch(s){throw s}},updateProductsOrder:async e=>{try{return(await o.A.put("".concat(l,"/order/batch"),e)).data}catch(s){throw s}}},c=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,a.I)({queryKey:["products","shop",e,{categoryId:s}],queryFn:()=>i.fetchProductsByShopId(e,s),enabled:!!e,staleTime:3e5})},d=()=>{const e=(0,r.jE)();return(0,n.n)({mutationFn:e=>i.createProduct(e),onSuccess:s=>{e.invalidateQueries({queryKey:["products","shop",s.shopId]}),s.categoryId&&e.invalidateQueries({queryKey:["products","category",s.categoryId]}),e.setQueryData(["product",s._id],s)}})},m=()=>{const e=(0,r.jE)();return(0,n.n)({mutationFn:e=>{let{productId:s,productData:t}=e;return i.updateProduct(s,t)},onSuccess:s=>{e.invalidateQueries({queryKey:["products","shop",s.shopId]}),s.categoryId&&e.invalidateQueries({queryKey:["products","category",s.categoryId]}),e.setQueryData(["product",s._id],s)}})},x=()=>{const e=(0,r.jE)();return(0,n.n)({mutationFn:e=>i.deleteProduct(e),onSuccess:s=>{const t=s.product;e.invalidateQueries({queryKey:["products","shop",t.shopId]}),t.categoryId&&e.invalidateQueries({queryKey:["products","category",t.categoryId]}),e.removeQueries({queryKey:["product",t._id]})}})}},7725:(e,s,t)=>{t.d(s,{eG:()=>l});var a=t(7109),r=t(2768);const n="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_API_KEY:"AIzaSyCVdOFTlnxaMs7X6kSfSF1qZ3SYc3bklwA",REACT_APP_API_GATEWAY_URL:"http://localhost:3000",REACT_APP_USER_SERVICE_URL:"http://localhost:3001",REACT_APP_EVENT_SERVICE_URL:"http://localhost:3002",REACT_APP_DISCOVERY_SERVICE_URL:"http://localhost:3003",REACT_APP_MESSAGE_SERVICE_URL:"http://localhost:3020",REACT_APP_CHAT_SERVICE_URL:"http://localhost:3020"}.REACT_APP_API_URL||"http://localhost:3008","/api/shop/categories"),o={fetchCategoriesByShopId:async e=>{try{return(await r.A.get("".concat(n,"/shop/").concat(e))).data}catch(s){throw s}},fetchCategoryById:async e=>{try{return(await r.A.get("".concat(n,"/").concat(e))).data}catch(s){throw s}},createCategory:async e=>{try{return(await r.A.post(n,e)).data}catch(s){throw s}},updateCategory:async(e,s)=>{try{return(await r.A.put("".concat(n,"/").concat(e),s)).data}catch(t){throw t}},deleteCategory:async e=>{try{return(await r.A.delete("".concat(n,"/").concat(e))).data}catch(s){throw s}},updateCategoriesOrder:async e=>{try{return(await r.A.put("".concat(n,"/order/batch"),e)).data}catch(s){throw s}}},l=e=>(0,a.I)({queryKey:["categories","shop",e],queryFn:()=>o.fetchCategoriesByShopId(e),enabled:!!e,staleTime:3e5})},8297:(e,s,t)=>{t.d(s,{T:()=>r});var a=t(2768);const r=async(e,s,t)=>{try{if(!e||!s)throw new Error("Image file and event ID are required");if(!t&&!(t=localStorage.getItem("token")))throw new Error("Authentication token is required for image upload");const n=new FormData;n.append("eventImage",e);const o=a.A.create();let l=t;t&&!t.startsWith("Bearer ")&&(l="Bearer ".concat(t));try{const e=await o.post("".concat("http://localhost:3002","/events/images/").concat(s),n,{headers:{Authorization:l}});if(e.data.success&&e.data.data&&e.data.data.imageUrl)return e.data.data.imageUrl;throw new Error(e.data.error||"Failed to upload image: Invalid response format")}catch(r){throw r}}catch(n){throw n.response,n}}},8433:(e,s,t)=>{t.d(s,{DW:()=>x,fH:()=>m,ye:()=>h});var a=t(5469),r=t(7109),n=t(2768);const o="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_API_KEY:"AIzaSyCVdOFTlnxaMs7X6kSfSF1qZ3SYc3bklwA",REACT_APP_API_GATEWAY_URL:"http://localhost:3000",REACT_APP_USER_SERVICE_URL:"http://localhost:3001",REACT_APP_EVENT_SERVICE_URL:"http://localhost:3002",REACT_APP_DISCOVERY_SERVICE_URL:"http://localhost:3003",REACT_APP_MESSAGE_SERVICE_URL:"http://localhost:3020",REACT_APP_CHAT_SERVICE_URL:"http://localhost:3020"}.REACT_APP_API_URL||"http://localhost:3008","/api/shop"),l=async e=>{try{return(await n.A.get("".concat(o,"/owner/").concat(e))).data}catch(s){if(s.response&&404===s.response.status)return null;throw s}},i=async e=>(await n.A.post("".concat(o),e)).data,c=async e=>(await n.A.put("".concat(o,"/").concat(e.id),e)).data,d=async e=>(await n.A.get("".concat(o,"/").concat(e))).data,m=(0,a.v)(((e,s)=>({currentShop:null,isLoading:!1,error:null,setCurrentShop:s=>e({currentShop:s}),clearCurrentShop:()=>e({currentShop:null}),fetchShopByUserId:async s=>{e({isLoading:!0,error:null});try{const t=await l(s);return e({currentShop:t,isLoading:!1}),t}catch(t){throw e({error:t.message,isLoading:!1}),t}},createShop:async s=>{e({isLoading:!0,error:null});try{const t=await i(s);return e({currentShop:t,isLoading:!1}),t}catch(t){throw e({error:t.message,isLoading:!1}),t}},updateShop:async s=>{e({isLoading:!0,error:null});try{const t=await c(s);return e({currentShop:t,isLoading:!1}),t}catch(t){throw e({error:t.message,isLoading:!1}),t}}}))),x=e=>(0,r.I)({queryKey:["shop","user",e],queryFn:()=>l(e),enabled:!!e,staleTime:3e5}),h=e=>(0,r.I)({queryKey:["shop",e],queryFn:()=>d(e),enabled:!!e,staleTime:3e5})},8564:(e,s,t)=>{t.d(s,{A:()=>o});var a=t(5038),r=t(5469),n=t(6887);const o=(0,r.v)((0,n.lt)((0,n.Zr)((e=>({activeTab:"upcoming",currentTemplateId:null,creationStep:0,eventDraft:null,setActiveTab:s=>e({activeTab:s}),setCurrentTemplateId:s=>e({currentTemplateId:s}),setCreationStep:s=>e({creationStep:s}),incrementCreationStep:()=>e((e=>({creationStep:e.creationStep+1}))),decrementCreationStep:()=>e((e=>({creationStep:Math.max(0,e.creationStep-1)}))),setEventDraft:s=>e({eventDraft:s}),updateEventDraft:s=>e((e=>({eventDraft:e.eventDraft?(0,a.A)((0,a.A)({},e.eventDraft),s):s}))),resetEventCreation:()=>e({creationStep:0,currentTemplateId:null,eventDraft:null})})),{name:"host-storage",partialize:e=>({eventDraft:e.eventDraft})})))},8659:(e,s,t)=>{t.d(s,{A:()=>p});var a=t(5038),r=t(9643),n=t(7192),o=t(2218),l=t(5432),i=t(8433),c=t(7717),d=t(7725),m=t(6507);const x=e=>{let{product:s,onEdit:t,onDelete:a}=e;const{name:r,description:n,price:l,discountPrice:i,images:c,categoryName:d,inStock:x,isService:h}=s,u=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),g=c&&c.length>0?c[0]:"https://via.placeholder.com/300?text=".concat(encodeURIComponent(r||"Product"));return(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,m.jsxs)("div",{className:"relative h-48 overflow-hidden",children:[(0,m.jsx)("img",{src:g,alt:r,className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/300?text=Image+Error"}}),!h&&!x&&(0,m.jsx)("div",{className:"absolute top-0 right-0 bg-red-500 text-white px-2 py-1 text-xs uppercase font-semibold",children:"Out of Stock"}),(0,m.jsx)("div",{className:"absolute top-0 left-0 ".concat(h?"bg-indigo-500":"bg-green-500"," text-white px-2 py-1 text-xs uppercase font-semibold"),children:h?"Service":"Product"})]}),(0,m.jsxs)("div",{className:"p-4 flex-grow",children:[(0,m.jsx)("h3",{className:"font-semibold text-lg mb-1 line-clamp-1",children:r}),d&&(0,m.jsxs)("div",{className:"flex items-center mb-2 text-gray-600 text-sm",children:[(0,m.jsx)(o.BuZ,{className:"mr-1 text-indigo-500"}),(0,m.jsx)("span",{children:d})]}),n&&(0,m.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:n}),(0,m.jsx)("div",{className:"flex items-end mt-auto",children:i?(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("span",{className:"text-lg font-bold text-indigo-700",children:u(i)}),(0,m.jsx)("span",{className:"ml-2 text-sm line-through text-gray-500",children:u(l)})]}):(0,m.jsx)("span",{className:"text-lg font-bold text-indigo-700",children:u(l)})})]}),(0,m.jsxs)("div",{className:"border-t border-gray-200 p-3 bg-gray-50 flex justify-end space-x-2",children:[(0,m.jsx)("button",{onClick:()=>t(s),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-full transition-colors","aria-label":"Edit product",children:(0,m.jsx)(o.uO9,{})}),(0,m.jsx)("button",{onClick:()=>a(s),className:"p-2 text-red-600 hover:bg-red-100 rounded-full transition-colors","aria-label":"Delete product",children:(0,m.jsx)(o.qbC,{})})]})]})},h=e=>{let{product:s,shopId:t,categories:n,onSuccess:l,onCancel:i}=e;const d=!!s,x=(0,a.A)({name:"",description:"",price:"",discountPrice:"",categoryId:"",images:[],inStock:!0,stockQuantity:0,isService:!1},s),[h,u]=(0,r.useState)(x),[g,p]=(0,r.useState)({}),[b,y]=(0,r.useState)((null===s||void 0===s?void 0:s.images)||[]),v=(0,c.Pg)(),f=(0,c.CC)(),j=e=>{const{name:s,value:t,type:r,checked:n}=e.target,o="checkbox"===r?n:t;u((0,a.A)((0,a.A)({},h),{},{[s]:o})),g[s]&&p((0,a.A)((0,a.A)({},g),{},{[s]:null}))},N=e=>{const{name:s,value:t}=e.target,r=""===t?"":parseFloat(t);u((0,a.A)((0,a.A)({},h),{},{[s]:r})),g[s]&&p((0,a.A)((0,a.A)({},g),{},{[s]:null}))};return(0,m.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return h.name.trim()||(e.name="Product name is required"),h.price||0===h.price?h.price<0&&(e.price="Price cannot be negative"):e.price="Price is required",h.discountPrice&&h.discountPrice>h.price&&(e.discountPrice="Discount price cannot be higher than the regular price"),p(e),0===Object.keys(e).length})())return;const r=(0,a.A)((0,a.A)({},h),{},{shopId:t});try{d?await f.mutateAsync({productId:s._id,productData:r}):await v.mutateAsync(r),l&&l()}catch(i){var n,o;p({submit:(null===(n=i.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"Failed to save product. Please try again."})}},className:"space-y-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name*"}),(0,m.jsx)("input",{type:"text",id:"name",name:"name",value:h.name,onChange:j,className:"w-full px-3 py-2 border ".concat(g.name?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"),placeholder:"Enter product name"}),g.name&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.name})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,m.jsx)("textarea",{id:"description",name:"description",value:h.description,onChange:j,rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter product description"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,m.jsxs)("select",{id:"categoryId",name:"categoryId",value:h.categoryId,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,m.jsx)("option",{value:"",children:"-- Select Category --"}),null===n||void 0===n?void 0:n.map((e=>(0,m.jsx)("option",{value:e._id,children:e.name},e._id)))]})]}),(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"checkbox",id:"isService",name:"isService",checked:h.isService,onChange:j,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,m.jsx)("label",{htmlFor:"isService",className:"ml-2 block text-sm text-gray-700",children:"This is a service (not a physical product)"})]})}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price*"}),(0,m.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,m.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,m.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"\u20b9"})}),(0,m.jsx)("input",{type:"number",id:"price",name:"price",value:h.price,onChange:N,min:"0",step:"0.01",className:"w-full pl-7 pr-3 py-2 border ".concat(g.price?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"),placeholder:"0.00"})]}),g.price&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.price})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"discountPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Price (Optional)"}),(0,m.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,m.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,m.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"\u20b9"})}),(0,m.jsx)("input",{type:"number",id:"discountPrice",name:"discountPrice",value:h.discountPrice,onChange:N,min:"0",step:"0.01",className:"w-full pl-7 pr-3 py-2 border ".concat(g.discountPrice?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"),placeholder:"0.00"})]}),g.discountPrice&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.discountPrice})]})]}),!h.isService&&(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"checkbox",id:"inStock",name:"inStock",checked:h.inStock,onChange:j,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,m.jsx)("label",{htmlFor:"inStock",className:"ml-2 block text-sm text-gray-700",children:"In Stock"})]})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"stockQuantity",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity (0 = unlimited)"}),(0,m.jsx)("input",{type:"number",id:"stockQuantity",name:"stockQuantity",value:h.stockQuantity,onChange:N,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Images"}),(0,m.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[b.map(((e,s)=>(0,m.jsxs)("div",{className:"relative border border-gray-300 rounded-md overflow-hidden h-32",children:[(0,m.jsx)("img",{src:e,alt:"Product ".concat(s+1),className:"w-full h-full object-cover"}),(0,m.jsx)("button",{type:"button",onClick:()=>(e=>{const s=[...b];s.splice(e,1),y(s),u((0,a.A)((0,a.A)({},h),{},{images:s}))})(s),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600","aria-label":"Remove image",children:(0,m.jsx)(o.QCr,{size:14})})]},s))),(0,m.jsxs)("button",{type:"button",onClick:e=>{const s="https://via.placeholder.com/300?text=Product+Image+".concat(b.length+1),t=[...b,s];y(t),u((0,a.A)((0,a.A)({},h),{},{images:t}))},className:"border-2 border-dashed border-gray-300 rounded-md flex flex-col items-center justify-center h-32 hover:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,m.jsx)(o.dkL,{className:"text-gray-400 text-3xl mb-2"}),(0,m.jsx)("span",{className:"text-sm text-gray-500",children:"Add Image"})]})]})]}),g.submit&&(0,m.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:(0,m.jsx)("p",{className:"text-red-700",children:g.submit})}),(0,m.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,m.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,m.jsx)("button",{type:"submit",disabled:v.isPending||f.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:v.isPending||f.isPending?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.hW,{className:"animate-spin mr-2"}),d?"Updating...":"Creating..."]}):d?"Update Product":"Create Product"})]})]})},u=e=>{let{isOpen:s,product:t,shopId:a,categories:r,onClose:n,onSuccess:l}=e;if(!s)return null;const i=t?"Edit":"Add New";return(0,m.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 p-4",children:(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[(0,m.jsxs)("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,m.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:[i," Product/Service"]}),(0,m.jsx)("button",{onClick:n,className:"p-1 rounded-full text-gray-400 hover:bg-gray-200 hover:text-gray-600 focus:outline-none","aria-label":"Close",children:(0,m.jsx)(o.QCr,{size:20})})]}),(0,m.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,m.jsx)(h,{product:t,shopId:a,categories:r,onCancel:n,onSuccess:()=>{l(),n()}})})]})})};var g=t(8894);const p=()=>{const e=(0,n.Zp)(),{user:s}=(0,l.n)(),t=(0,g.jE)(),[h,p]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),[v,f]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[w,C]=(0,r.useState)(null),{data:A,isLoading:k,error:S}=(0,i.DW)(null===s||void 0===s?void 0:s._id),{data:_,isLoading:E,error:I}=(0,c.Mv)(null===A||void 0===A?void 0:A._id,j),{data:P,isLoading:T,error:R}=(0,d.eG)(null===A||void 0===A?void 0:A._id),F=(0,c.W$)(),L=()=>{e("/shop/catalogue")},D=e=>{y(e),p(!0)},O=e=>{C(e)},U=_?_.filter((e=>{var s;return e.name.toLowerCase().includes(v.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(v.toLowerCase()))})):[];if(k||E||T)return(0,m.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,m.jsxs)("div",{className:"flex items-center mb-6",children:[(0,m.jsx)("button",{onClick:L,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,m.jsx)(o.QVr,{className:"text-gray-600"})}),(0,m.jsx)("h1",{className:"text-2xl font-bold",children:"Products & Services"})]}),(0,m.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,m.jsxs)("div",{className:"animate-pulse",children:[(0,m.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,m.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,m.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,m.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-8"})]})})]})});if(S||I||R){const e=S||I||R;return(0,m.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,m.jsxs)("div",{className:"flex items-center mb-6",children:[(0,m.jsx)("button",{onClick:L,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,m.jsx)(o.QVr,{className:"text-gray-600"})}),(0,m.jsx)("h1",{className:"text-2xl font-bold",children:"Products & Services"})]}),(0,m.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:(0,m.jsx)("div",{className:"flex",children:(0,m.jsxs)("p",{className:"text-red-700",children:["Error loading shop data: ",e.message||"Unable to load shop data"]})})})]})})}return A?(0,m.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,m.jsxs)("div",{className:"flex items-center mb-6",children:[(0,m.jsx)("button",{onClick:L,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,m.jsx)(o.QVr,{className:"text-gray-600"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl font-bold",children:"Products & Services"}),(0,m.jsx)("p",{className:"text-gray-600",children:A.name})]})]}),(0,m.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,m.jsxs)("div",{className:"p-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,m.jsx)("h2",{className:"text-xl font-semibold",children:"Products & Services"}),(0,m.jsxs)("button",{onClick:()=>{y(null),p(!0)},className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:[(0,m.jsx)(o.OiG,{className:"mr-2"}),"Add New Item"]})]}),(0,m.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,m.jsxs)("div",{className:"relative flex-grow",children:[(0,m.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,m.jsx)(o.KSO,{className:"text-gray-400"})}),(0,m.jsx)("input",{type:"text",placeholder:"Search products...",value:v,onChange:e=>f(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,m.jsx)("div",{className:"sm:w-64",children:(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,m.jsx)(o.YsJ,{className:"text-gray-400"})}),(0,m.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none",children:[(0,m.jsx)("option",{value:"",children:"All Categories"}),P&&P.map((e=>(0,m.jsx)("option",{value:e._id,children:e.name},e._id)))]})]})})]}),U.length>0?(0,m.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:U.map((e=>{var s;return(0,m.jsx)(x,{product:(0,a.A)((0,a.A)({},e),{},{categoryName:(null===(s=e.categoryId)||void 0===s?void 0:s.name)||""}),onEdit:D,onDelete:O},e._id)}))}):(0,m.jsx)("div",{className:"bg-gray-50 border border-dashed border-gray-300 rounded-lg p-8 text-center",children:v||j?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"text-gray-500 mb-4",children:"No products found with the current filters."}),(0,m.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"text-gray-500 mb-4",children:"No products or services added yet."}),(0,m.jsx)("p",{className:"text-gray-500",children:'Click "Add New Item" to create your first product or service.'})]})}),(0,m.jsx)(u,{isOpen:h,product:b,shopId:null===A||void 0===A?void 0:A._id,categories:P||[],onClose:()=>{p(!1),y(null)},onSuccess:()=>{t.invalidateQueries(["products","shop",A._id])}}),w&&(0,m.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 p-4",children:(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Confirm Delete"}),(0,m.jsxs)("p",{className:"mb-6",children:["Are you sure you want to delete ",(0,m.jsx)("strong",{children:w.name}),"? This action cannot be undone."]}),(0,m.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,m.jsx)("button",{onClick:()=>C(null),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,m.jsx)("button",{onClick:async()=>{if(w)try{await F.mutateAsync(w._id),t.invalidateQueries(["products","shop",A._id])}catch(e){}finally{C(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})})]})}):(0,m.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,m.jsxs)("div",{className:"flex items-center mb-6",children:[(0,m.jsx)("button",{onClick:L,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,m.jsx)(o.QVr,{className:"text-gray-600"})}),(0,m.jsx)("h1",{className:"text-2xl font-bold",children:"Products & Services"})]}),(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden p-6 text-center",children:[(0,m.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No Shop Found"}),(0,m.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to set up your shop before you can manage your products."}),(0,m.jsx)("button",{onClick:()=>e("/shop/edit"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Set Up Your Shop"})]})]})})}},8763:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(5038),r=t(9643),n=t(7192),o=t(2218),l=t(5432),i=t(8433),c=t(6507);const d=()=>{const e=(0,n.Zp)(),{user:s}=(0,l.n)(),{fetchShopByUserId:t,updateShop:d,createShop:m}=(0,i.fH)(),[x,h]=(0,r.useState)(!0),[u,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)({name:"",description:"",category:"",contactEmail:"",contactPhone:"",address:"",logo:"",bannerImage:"",isActive:!0});(0,r.useEffect)((()=>{(async()=>{if(null!==s&&void 0!==s&&s._id)try{h(!0);const e=await t(s._id);b(e?{name:e.name||"",description:e.description||"",category:e.category||"",contactEmail:e.contactEmail||s.email||"",contactPhone:e.contactPhone||"",address:e.address||"",logo:e.logo||"",bannerImage:e.bannerImage||"",isActive:void 0===e.isActive||e.isActive}:e=>(0,a.A)((0,a.A)({},e),{},{contactEmail:s.email||""}))}catch(r){}finally{h(!1)}else e("/login")})()}),[s,e,t]);const y=e=>{const{name:s,value:t,type:r,checked:n}=e.target;b((e=>(0,a.A)((0,a.A)({},e),{},{[s]:"checkbox"===r?n:t})))},v=()=>{e(-1)};return x?(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)("button",{onClick:()=>e(-1),className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,c.jsx)(o.QVr,{className:"text-gray-600"})}),(0,c.jsx)("h1",{className:"text-2xl font-bold",children:"Business Management"})]}),(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-8"}),(0,c.jsx)("div",{className:"h-10 bg-gray-200 rounded w-full mb-4"}),(0,c.jsx)("div",{className:"h-10 bg-gray-200 rounded w-full mb-4"}),(0,c.jsx)("div",{className:"h-10 bg-gray-200 rounded w-full mb-4"})]})})]}):(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)("button",{onClick:v,className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Go back",children:(0,c.jsx)(o.QVr,{className:"text-gray-600"})}),(0,c.jsxs)("h1",{className:"text-2xl font-bold flex items-center",children:[(0,c.jsx)(o.Tvt,{className:"mr-2 text-indigo-600"}),p.name?"Edit Business Info":"Create Business Info"]})]}),(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,c.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),p.name&&p.description&&p.category)try{g(!0);const r=await t(s._id);r?await d((0,a.A)((0,a.A)({},p),{},{id:r._id})):await m((0,a.A)((0,a.A)({},p),{},{ownerId:s._id})),e("/shop/profile")}catch(n){alert("Failed to save shop data. Please try again.")}finally{g(!1)}else alert("Please fill in all required fields")},className:"p-6",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name *"}),(0,c.jsx)("input",{type:"text",id:"name",name:"name",value:p.name,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your business name",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,c.jsxs)("select",{id:"category",name:"category",value:p.category,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select a category"}),["Clothing & Accessories","Electronics","Home & Garden","Beauty & Personal Care","Food & Beverages","Arts & Crafts","Sports & Outdoors","Books & Media","Health & Wellness","Other"].map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),(0,c.jsx)("input",{type:"email",id:"contactEmail",name:"contactEmail",value:p.contactEmail,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter contact email"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"contactPhone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),(0,c.jsx)("input",{type:"tel",id:"contactPhone",name:"contactPhone",value:p.contactPhone,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter contact phone"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address"}),(0,c.jsx)("input",{type:"text",id:"address",name:"address",value:p.address,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter business address"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo URL"}),(0,c.jsx)("input",{type:"url",id:"logo",name:"logo",value:p.logo,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter logo URL"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"bannerImage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Banner Image URL"}),(0,c.jsx)("input",{type:"url",id:"bannerImage",name:"bannerImage",value:p.bannerImage,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter banner image URL"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,c.jsx)("textarea",{id:"description",name:"description",value:p.description,onChange:y,rows:"4",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe your shop",required:!0})]}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:p.isActive,onChange:y,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,c.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Shop is active and visible to customers"})]})})]}),(0,c.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row sm:justify-end gap-4",children:[(0,c.jsx)("button",{type:"button",onClick:v,className:"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",disabled:u,className:"w-full sm:w-auto flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.dIn,{className:"mr-2"}),"Save Shop"]})})]})]})})]})}},8818:()=>{},9668:()=>{}},e=>{e.O(0,[421,600,367,830,218,445,7,978,17,895,282,713],(()=>{return s=148,e(e.s=s);var s}));e.O()}]);
//# sourceMappingURL=main~7bd12dde.f74af16d.js.map