"use strict";(self.webpackChunktymout_frontend=self.webpackChunktymout_frontend||[]).push([[6],{8006:(e,t,s)=>{s.d(t,{A:()=>h});var r=s(9643),l=s(2218),a=s(5038),n=s(7192),i=s(5469),c=s(1899);const o=(0,i.v)((0,c.y)("ui",((e,t)=>({scrollTargets:{},modalState:{isOpen:!1,modalType:null,modalProps:{}},setScrollTarget:(t,s)=>e((e=>({scrollTargets:(0,a.A)((0,a.A)({},e.scrollTargets),{},{[t]:s})}))),getScrollTarget:e=>t().scrollTargets[e],clearScrollTarget:t=>e((e=>{const s=(0,a.A)({},e.scrollTargets);return delete s[t],{scrollTargets:s}})),scrollToElement:e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},openModal:function(t){return e({modalState:{isOpen:!0,modalType:t,modalProps:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}})},closeModal:()=>e({modalState:{isOpen:!1,modalType:null,modalProps:{}}})}))));var d=s(8894),m=s(7027),x=s(3794);const u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"explore";const t=(0,n.Zp)(),l=(0,d.jE)(),i=o((e=>e.setScrollTarget)),c=(0,r.useCallback)(((e,t)=>"".concat(e,"-card-").concat(t)),[]),u=(0,r.useCallback)(((e,t)=>{switch(e){case"table":return"/tables/".concat(t);case"circle":return"/circles/".concat(t);default:return"/events/".concat(t)}}),[]),g=(0,r.useCallback)((function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"event";const n=c(a,r.id);i(e,n),"event"===a&&l.prefetchQuery({queryKey:["event",r.id],queryFn:()=>Promise.resolve().then(s.bind(s,4702)).then((e=>e.default.getEventById(r.id))),staleTime:1e4}),t(u(a,r.id),{state:{from:e,cardElementId:n}})}),[e,t,c,u,i,l]),h=(0,r.useCallback)((function(s,r){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"event";if(!r||!r.id)return;const a=c(l,s.id);i(e,a),t("/profile/".concat(r.id),{state:{from:e,returnTo:u(l,s.id),itemTitle:s.title,cardElementId:a}})}),[e,t,c,u,i]),p=(0,r.useCallback)((async e=>{let{itemId:t,type:s}=e;return await new Promise((e=>setTimeout(e,800))),{success:!0,itemId:t,type:s}}),[]),v=(0,m.n)({mutationFn:p,onMutate:async e=>{await l.cancelQueries({queryKey:["events"]}),await l.cancelQueries({queryKey:["personalizedEvents"]});const t=l.getQueryData(["events"]),s=l.getQueryData(["personalizedEvents",{}]),r=(t,s)=>{s&&l.setQueryData(t,(t=>t?Array.isArray(t)?t.map((t=>t.id===e.itemId?(0,a.A)((0,a.A)({},t),{},{joined:!0}):t)):t.events?(0,a.A)((0,a.A)({},t),{},{events:t.events.map((t=>t.id===e.itemId?(0,a.A)((0,a.A)({},t),{},{joined:!0}):t))}):t:t))};return r(["events"],t),r(["personalizedEvents",{}],s),{previousEvents:t,previousPersonalizedEvents:s}},onError:(e,t,s)=>{null!==s&&void 0!==s&&s.previousEvents&&l.setQueryData(["events"],s.previousEvents),null!==s&&void 0!==s&&s.previousPersonalizedEvents&&l.setQueryData(["personalizedEvents",{}],s.previousPersonalizedEvents),x.oR.error("Failed to join ".concat(t.type,": ").concat(e.message))},onSuccess:(e,t)=>{const s=t.type.charAt(0).toUpperCase()+t.type.slice(1);x.oR.success("Successfully joined ".concat(s,"!"))},onSettled:()=>{l.invalidateQueries({queryKey:["events"]}),l.invalidateQueries({queryKey:["personalizedEvents"]})}}),f=(0,r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"event";v.mutate({itemId:e,type:t})}),[v]);return(0,r.useMemo)((()=>({handleCardClick:g,handleProfileClick:h,handlePrimaryAction:f,isPending:v.isPending,isError:v.isError,error:v.error})),[g,h,f,v.isPending,v.isError,v.error])};var g=s(6507);const h=e=>{let{item:t,size:s="medium",source:r="explore",type:a="event",showDescription:n=!0,fullWidth:i=!1,variant:c="default",customActions:o=null,disableNavigation:d=!1,hideHeader:m=!1}=e;const{handleCardClick:x,handleProfileClick:h,handlePrimaryAction:p,isPending:v}=u(r);if(!t)return null;const{id:f,title:j,description:y,location:b,distance:N,participants:w,maxParticipants:k,tags:C,image:E,event_image:A,host:P,date:T,time:I,recommendation:z,memberCount:Q,attendees:S,rating:q,activity:D,place:M}=t,O=E||A,U="".concat(a,"-card-").concat(f),K=()=>{d||x(t,a)},V=e=>{if(d)return;e.stopPropagation();const s=R();h(t,s,a)},_=e=>{if(!e)return"";const t=e.split(" ");return t.length<=8?e:t.slice(0,8).join(" ")+"..."},F={small:{card:i?"w-full":"max-w-xs",image:"h-40",title:"text-lg",description:"line-clamp-2"},medium:{card:i?"w-full":"max-w-sm",image:"h-48",title:"text-xl",description:"line-clamp-3"},large:{card:i?"w-full":"max-w-md",image:"h-56",title:"text-2xl",description:"line-clamp-4"}},H=F[s]||F.medium,J=()=>"circle"===a?"admin":"host",R=()=>"circle"===a?t.admin||{}:P||t.organizer||{},X=()=>{switch(a){case"circle":return Q||0;case"event":return Array.isArray(S)?S.length:S||w||0;default:return w||0}};return"explore"===c?(0,g.jsx)("div",{id:U,className:"w-full bg-white overflow-hidden hover:bg-gray-50 transition-all duration-300 cursor-pointer mb-2",onClick:K,children:(0,g.jsxs)("div",{className:"flex p-4",children:[(0,g.jsx)("div",{className:"flex-shrink-0",children:O?(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("img",{src:O,alt:(a||"Item")+" Image",className:"w-14 h-14 rounded-full object-cover border-2 border-gray-200",onError:e=>{e.target.onerror=null,e.target.style.display="none",e.target.parentNode.classList.add("bg-indigo-100","rounded-full","w-14","h-14","flex","items-center","justify-center");const t=document.createElement("div");t.className="text-indigo-500 font-medium text-lg",t.innerText=(null===j||void 0===j?void 0:j.charAt(0))||a.charAt(0).toUpperCase(),e.target.parentNode.appendChild(t)}}),D&&(0,g.jsx)("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:(0,g.jsx)("span",{className:"font-medium text-xs",children:D})})]}):(0,g.jsx)("div",{className:"bg-indigo-100 w-14 h-14 rounded-full flex items-center justify-center border-2 border-gray-200",children:(0,g.jsx)("span",{className:"text-indigo-500 font-medium text-lg",children:(null===j||void 0===j?void 0:j.charAt(0))||a.charAt(0).toUpperCase()})})}),(0,g.jsxs)("div",{className:"ml-4 flex-1 flex flex-col",children:[(0,g.jsx)("div",{className:"flex justify-between items-start mb-1",children:(0,g.jsx)("h3",{className:"text-base font-bold line-clamp-1",children:j})}),y&&n&&(0,g.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:_(y)}),q&&(0,g.jsx)("div",{className:"flex items-center mb-1.5",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(l.gt3,{className:"h-3.5 w-3.5 text-yellow-500 mr-1"}),(0,g.jsx)("span",{className:"text-xs text-gray-700",children:q}),(0,g.jsx)("span",{className:"mx-1 text-xs text-gray-400",children:"\u2022"})]})}),(0,g.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-auto",children:[I&&(0,g.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,g.jsx)(l.w_X,{className:"h-3 w-3 mr-1"}),(0,g.jsx)("span",{children:I})]}),(0,g.jsxs)("div",{className:"flex w-full justify-between items-center",children:[T&&(0,g.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,g.jsx)(l.bfZ,{className:"h-3 w-3 mr-1"}),(0,g.jsx)("span",{children:T})]}),R()&&Object.keys(R()).length>0&&(0,g.jsxs)("div",{className:"flex items-center text-xs text-gray-500 ml-auto cursor-pointer",onClick:V,children:[(0,g.jsx)("span",{className:"text-xs text-gray-600 mr-1",children:"Host:"}),(0,g.jsx)("img",{src:R().image,alt:R().name,className:"w-4 h-4 rounded-full object-cover mx-1",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/16?text=U"}}),(0,g.jsxs)("span",{className:"text-xs font-medium text-gray-700",children:[R().name," ",R().verified&&"\u2713"]})]})]}),X()>0&&(0,g.jsxs)("div",{className:"flex items-center text-xs text-gray-500 ml-auto",children:[(0,g.jsx)(l.YXz,{className:"h-3 w-3 mr-1 text-blue-500"}),(0,g.jsxs)("span",{className:"text-blue-500",children:[X(),k?"/".concat(k):""]})]})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,g.jsxs)("div",{className:"flex flex-wrap gap-1 items-center",children:[C&&C.length>0&&C.slice(0,2).map(((e,t)=>{const s=[{bg:"bg-blue-50",text:"text-blue-600"},{bg:"bg-green-50",text:"text-green-600"},{bg:"bg-yellow-50",text:"text-yellow-600"},{bg:"bg-purple-50",text:"text-purple-600"},{bg:"bg-pink-50",text:"text-pink-600"},{bg:"bg-indigo-50",text:"text-indigo-600"}],r=e.length%s.length,{bg:l,text:a}=s[r];return(0,g.jsx)("span",{className:"".concat(l," ").concat(a," text-xs px-2 py-0.5 rounded-full"),children:e},"tag-".concat(t))})),C&&C.length>2&&(0,g.jsxs)("span",{className:"text-gray-400 text-xs ml-1",children:["+",C.length-2]})]}),(b||(null===M||void 0===M?void 0:M.name))&&(0,g.jsxs)("div",{className:"flex items-center text-xs text-gray-500 ml-auto",children:[(0,g.jsx)(l.vq8,{className:"h-3 w-3 text-gray-500 mr-1"}),(0,g.jsxs)("span",{children:[null!==M&&void 0!==M&&M.name?M.name:b,N&&(0,g.jsxs)("span",{className:"ml-1",children:["\u2022 ",N," km"]})]})]})]})]})]})}):(0,g.jsxs)("div",{id:U,className:"w-full ".concat(H.card," bg-white rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300 cursor-pointer border border-gray-200"),onClick:K,children:[!m&&("default"===c||"explore"===c)&&R()&&Object.keys(R()).length>0&&(0,g.jsxs)("div",{className:"py-4 px-5 bg-gray-50 flex items-center cursor-pointer hover:bg-gray-100 transition-colors duration-200",onClick:V,children:[(0,g.jsx)("img",{src:R().image,alt:R().name,className:"w-10 h-10 rounded-full object-cover mr-3",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/32?text=User"}}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm font-medium mb-0.5",children:R().name}),(0,g.jsxs)("p",{className:"text-xs text-gray-500",children:[J()," ",R().verified&&"\u2713"]})]})]}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsxs)("div",{className:"relative ".concat(H.image," overflow-hidden"),children:[(0,g.jsx)("img",{src:O,alt:j,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/400x300?text=No+Image"}}),!1]}),(0,g.jsx)("div",{className:"absolute top-2 left-2 bg-indigo-600 text-white text-xs font-bold px-2 py-1 rounded-full hidden",children:a.charAt(0).toUpperCase()+a.slice(1)}),z&&(0,g.jsxs)("div",{className:"absolute top-10 right-2 bg-indigo-600 text-white text-xs font-bold px-2 py-1 rounded-full",children:[Math.round(100*z.score),"% Match"]})]}),(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsx)("h3",{className:"".concat(H.title," font-bold text-gray-800 mb-2"),children:j}),n&&(0,g.jsx)("p",{className:"".concat(H.description," text-gray-600 mb-3 overflow-hidden"),children:_(y)}),(0,g.jsxs)("div",{className:"space-y-2 text-sm text-gray-500",children:[T&&I&&(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsxs)("div",{className:"flex items-center mr-3",children:[(0,g.jsx)(l.bfZ,{className:"mr-1 text-indigo-600"}),(0,g.jsx)("span",{children:T})]}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(l.w_X,{className:"mr-1 text-indigo-600"}),(0,g.jsx)("span",{children:I})]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,g.jsxs)("div",{className:"flex items-center truncate mr-2",children:[(0,g.jsx)(l.vq8,{className:"mr-1 text-indigo-600"}),(0,g.jsx)("span",{className:"truncate",children:b})]}),N&&(0,g.jsxs)("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[N," km"]})]}),q&&(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(l.gt3,{className:"mr-1 text-yellow-500"}),(0,g.jsx)("span",{children:q.toFixed(1)})]})]}),C&&C.length>0&&(0,g.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[C.slice(0,3).map(((e,t)=>(0,g.jsxs)("span",{className:"inline-flex items-center text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded-full",children:[(0,g.jsx)(l.wJQ,{className:"mr-1 text-xs text-indigo-600"}),e]},t))),C.length>3&&(0,g.jsxs)("span",{className:"inline-block text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded-full",children:["+",C.length-3]})]}),"onlyforyou"===c&&R()&&Object.keys(R()).length>0&&(0,g.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-100 flex items-center",children:[(0,g.jsx)("img",{src:R().image,alt:R().name,className:"w-8 h-8 rounded-full object-cover mr-2",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/32?text=Host"}}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm font-medium",children:R().name}),(0,g.jsxs)("p",{className:"text-xs text-gray-500",children:[J()," ",R().verified&&"\u2713"]})]})]}),"explore"===c?(0,g.jsx)("div",{className:"mt-4 flex justify-center",children:(0,g.jsx)("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-1 px-2 rounded transition-colors duration-200 mt-1 text-sm",onClick:K,"aria-label":"View details",children:"View Details"})}):o||(0,g.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,g.jsx)("button",{onClick:e=>{e&&e.stopPropagation(),p(f,a)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:(()=>{if(v)return"Processing...";switch(a){case"circle":return"Join Circle";case"table":return"Join Table";default:return"RSVP"}})()}),(0,g.jsx)("button",{onClick:e=>{e.stopPropagation(),K()},className:"border border-indigo-600 text-indigo-600 px-4 py-2 rounded-md hover:bg-indigo-50 transition-colors",children:"View Details"})]})]})]})}}}]);
//# sourceMappingURL=6.4608872a.chunk.js.map