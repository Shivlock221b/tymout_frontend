"use strict";(self.webpackChunktymout_frontend=self.webpackChunktymout_frontend||[]).push([[390],{6390:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var n=s(9643),r=s(7192),i=s(2345),a=s(5432),c=s(6507);const o=()=>{const e=(0,r.Zp)(),t=(0,r.zy)(),[s,o]=(0,n.useState)(null),{mutate:d,isLoading:l,isSuccess:h,isError:m,error:u}=(0,i.Cq)(),x=(0,a.n)((e=>e.isAuthenticated));return(0,n.useEffect)((()=>{(async()=>{const s=new URLSearchParams(t.search),n=s.get("token"),r=s.get("refreshToken");if(!n)return o("Authentication failed - no token received"),void setTimeout((()=>e("/login")),2e3);d({token:n,refreshToken:r})})()}),[t,d,e]),(0,n.useEffect)((()=>{if(h||x){const t=a.n.getState().user;t&&t.completeness<50?e("/onboarding"):e("/explore")}m&&u&&(o("Authentication failed - please try again"),setTimeout((()=>e("/login")),2e3))}),[h,m,u,e,x]),l?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,c.jsxs)("div",{className:"p-8 bg-white shadow-md rounded-lg",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,c.jsx)("p",{className:"text-center mt-4 text-gray-700",children:"Verifying your authentication..."})]})}):s?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,c.jsxs)("div",{className:"p-8 bg-white shadow-md rounded-lg",children:[(0,c.jsx)("div",{className:"text-red-500 text-center mb-4",children:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,c.jsx)("p",{className:"text-center text-red-600 font-medium",children:s}),(0,c.jsx)("p",{className:"text-center mt-2 text-gray-600",children:"Redirecting to login page..."})]})}):(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,c.jsxs)("div",{className:"p-8 bg-white shadow-md rounded-lg",children:[(0,c.jsx)("div",{className:"text-green-500 text-center mb-4",children:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,c.jsx)("p",{className:"text-center text-green-600 font-medium",children:"Authentication successful!"}),(0,c.jsx)("p",{className:"text-center mt-2 text-gray-600",children:"Redirecting to your dashboard..."})]})})}}}]);
//# sourceMappingURL=390.05fe1a9e.chunk.js.map